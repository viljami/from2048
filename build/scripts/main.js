/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.11 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/**
 * @license
 * Lo-Dash 2.4.1 <http://lodash.com/>
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function eachReverse(e,t){if(e){var n;for(n=e.length-1;n>-1&&(!e[n]||!t(e[n],n,e));n-=1);}}function hasProp(e,t){return hasOwn.call(e,t)}function getOwn(e,t){return hasProp(e,t)&&e[t]}function eachProp(e,t){var n;for(n in e)if(hasProp(e,n)&&t(e[n],n))break}function mixin(e,t,n,r){return t&&eachProp(t,function(t,i){(n||!hasProp(e,i))&&(!r||"object"!=typeof t||!t||isArray(t)||isFunction(t)||t instanceof RegExp?e[i]=t:(e[i]||(e[i]={}),mixin(e[i],t,n,r)))}),e}function bind(e,t){return function(){return t.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var t=global;return each(e.split("."),function(e){t=t[e]}),t}function makeError(e,t,n,r){var i=new Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,n&&(i.originalError=n),i}function newContext(e){function t(e){var t,n,r=e.length;for(t=0;r>t;t++)if(n=e[t],"."===n)e.splice(t,1),t-=1;else if(".."===n){if(1===t&&(".."===e[2]||".."===e[0]))break;t>0&&(e.splice(t-1,2),t-=2)}}function n(e,n,r){var i,o,a,u,c,s,l,f,p,d,h,g=n&&n.split("/"),m=g,v=k.map,b=v&&v["*"];if(e&&"."===e.charAt(0)&&(n?(m=g.slice(0,g.length-1),e=e.split("/"),l=e.length-1,k.nodeIdCompat&&jsSuffixRegExp.test(e[l])&&(e[l]=e[l].replace(jsSuffixRegExp,"")),e=m.concat(e),t(e),e=e.join("/")):0===e.indexOf("./")&&(e=e.substring(2))),r&&v&&(g||b)){a=e.split("/");e:for(u=a.length;u>0;u-=1){if(s=a.slice(0,u).join("/"),g)for(c=g.length;c>0;c-=1)if(o=getOwn(v,g.slice(0,c).join("/")),o&&(o=getOwn(o,s))){f=o,p=u;break e}!d&&b&&getOwn(b,s)&&(d=getOwn(b,s),h=u)}!f&&d&&(f=d,p=h),f&&(a.splice(0,p,f),e=a.join("/"))}return i=getOwn(k.pkgs,e),i?i:e}function r(e){isBrowser&&each(scripts(),function(t){return t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName?(t.parentNode.removeChild(t),!0):void 0})}function i(e){var t=getOwn(k.paths,e);return t&&isArray(t)&&t.length>1?(t.shift(),x.require.undef(e),x.require([e]),!0):void 0}function o(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function a(e,t,r,i){var a,u,c,s,l=null,f=t?t.name:null,p=e,d=!0,h="";return e||(d=!1,e="_@r"+(O+=1)),s=o(e),l=s[0],e=s[1],l&&(l=n(l,f,i),u=getOwn(q,l)),e&&(l?h=u&&u.normalize?u.normalize(e,function(e){return n(e,f,i)}):n(e,f,i):(h=n(e,f,i),s=o(h),l=s[0],h=s[1],r=!0,a=x.nameToUrl(h))),c=!l||u||r?"":"_unnormalized"+(B+=1),{prefix:l,name:h,parentMap:t,unnormalized:!!c,url:a,originalName:p,isDefine:d,id:(l?l+"!"+h:h)+c}}function u(e){var t=e.id,n=getOwn(E,t);return n||(n=E[t]=new x.Module(e)),n}function c(e,t,n){var r=e.id,i=getOwn(E,r);!hasProp(q,r)||i&&!i.defineEmitComplete?(i=u(e),i.error&&"error"===t?n(i.error):i.on(t,n)):"defined"===t&&n(q[r])}function s(e,t){var n=e.requireModules,r=!1;t?t(e):(each(n,function(t){var n=getOwn(E,t);n&&(n.error=e,n.events.error&&(r=!0,n.emit("error",e)))}),r||req.onError(e))}function l(){globalDefQueue.length&&(apsp.apply(j,[j.length,0].concat(globalDefQueue)),globalDefQueue=[])}function f(e){delete E[e],delete C[e]}function p(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,each(e.depMaps,function(r,i){var o=r.id,a=getOwn(E,o);!a||e.depMatched[i]||n[o]||(getOwn(t,o)?(e.defineDep(i,q[o]),e.check()):p(a,t,n))}),n[r]=!0)}function d(){var e,t,n=1e3*k.waitSeconds,o=n&&x.startTime+n<(new Date).getTime(),a=[],u=[],c=!1,l=!0;if(!b){if(b=!0,eachProp(C,function(e){var n=e.map,s=n.id;if(e.enabled&&(n.isDefine||u.push(e),!e.error))if(!e.inited&&o)i(s)?(t=!0,c=!0):(a.push(s),r(s));else if(!e.inited&&e.fetched&&n.isDefine&&(c=!0,!n.prefix))return l=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=x.contextName,s(e);l&&each(u,function(e){p(e,{},{})}),o&&!t||!c||!isBrowser&&!isWebWorker||_||(_=setTimeout(function(){_=0,d()},50)),b=!1}}function h(e){hasProp(q,e[0])||u(a(e[0],null,!0)).init(e[1],e[2])}function g(e,t,n,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,t):e.removeEventListener(n,t,!1)}function m(e){var t=e.currentTarget||e.srcElement;return g(t,x.onScriptLoad,"load","onreadystatechange"),g(t,x.onScriptError,"error"),{node:t,id:t&&t.getAttribute("data-requiremodule")}}function v(){var e;for(l();j.length;){if(e=j.shift(),null===e[0])return s(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}}var b,y,x,w,_,k={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},E={},C={},S={},j=[],q={},P={},D={},O=1,B=1;return w={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?q[e.map.id]=e.exports:e.exports=q[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(k.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},y=function(e){this.events=getOwn(S,e.id)||{},this.map=e,this.shim=getOwn(k.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;return this.shim?void x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=x.execCb(n,o,r,i)}catch(a){e=a}else i=x.execCb(n,o,r,i);if(this.map.isDefine&&void 0===i&&(t=this.module,t?i=t.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",s(this.error=e)}else i=o;this.exports=i,this.map.isDefine&&!this.ignore&&(q[n]=i,req.onResourceLoad&&req.onResourceLoad(x,this.map,this.depMaps)),f(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,t=e.id,r=a(e.prefix);this.depMaps.push(r),c(r,"defined",bind(this,function(r){var i,o,l,p=getOwn(D,this.map.id),d=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,g=x.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(d=r.normalize(d,function(e){return n(e,h,!0)})||""),o=a(e.prefix+"!"+d,this.map.parentMap),c(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),l=getOwn(E,o.id),void(l&&(this.depMaps.push(o),this.events.error&&l.on("error",bind(this,function(e){this.emit("error",e)})),l.enable()))):p?(this.map.url=x.nameToUrl(p),void this.load()):(i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[t],eachProp(E,function(e){0===e.map.id.indexOf(t+"_unnormalized")&&f(e.map.id)}),s(e)}),i.fromText=bind(this,function(n,r){var o=e.name,c=a(o),l=useInteractive;r&&(n=r),l&&(useInteractive=!1),u(c),hasProp(k.config,t)&&(k.config[o]=k.config[t]);try{req.exec(n)}catch(f){return s(makeError("fromtexteval","fromText eval for "+t+" failed: "+f,f,[t]))}l&&(useInteractive=!0),this.depMaps.push(c),x.completeLoad(o),g([o],i)}),void r.load(e.name,g,i,k))})),x.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){C[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,t){var n,r,i;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[t]=e,i=getOwn(w,e.id))return void(this.depExports[t]=i(this));this.depCount+=1,c(e,"defined",bind(this,function(e){this.defineDep(t,e),this.check()})),this.errback&&c(e,"error",bind(this,this.errback))}n=e.id,r=E[n],hasProp(w,n)||!r||r.enabled||x.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var t=getOwn(E,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){each(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:k,contextName:e,registry:E,defined:q,urlFetched:P,defQueue:j,Module:y,makeModuleMap:a,nextTick:req.nextTick,onError:s,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=k.shim,n={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,t){n[t]?(k[t]||(k[t]={}),mixin(k[t],e,!0,!0)):k[t]=e}),e.bundles&&eachProp(e.bundles,function(e,t){each(e,function(e){e!==t&&(D[e]=t)})}),e.shim&&(eachProp(e.shim,function(e,n){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=x.makeShimExports(e)),t[n]=e}),k.shim=t),e.packages&&each(e.packages,function(e){var t,n;e="string"==typeof e?{name:e}:e,n=e.name,t=e.location,t&&(k.paths[n]=e.location),k.pkgs[n]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(E,function(e,t){e.inited||e.map.unnormalized||(e.map=a(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){function t(){var t;return e.init&&(t=e.init.apply(global,arguments)),t||e.exports&&getGlobal(e.exports)}return t},makeRequire:function(t,i){function o(n,r,c){var l,f,p;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof n?isFunction(r)?s(makeError("requireargs","Invalid require call"),c):t&&hasProp(w,n)?w[n](E[t.id]):req.get?req.get(x,n,t,o):(f=a(n,t,!1,!0),l=f.id,hasProp(q,l)?q[l]:s(makeError("notloaded",'Module name "'+l+'" has not been loaded yet for context: '+e+(t?"":". Use require([])")))):(v(),x.nextTick(function(){v(),p=u(a(null,t)),p.skipMap=i.skipMap,p.init(n,r,c,{enabled:!0}),d()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==i&&(!a||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),x.nameToUrl(n(e,t&&t.id,!0),r,!0)},defined:function(e){return hasProp(q,a(e,t,!1,!0).id)},specified:function(e){return e=a(e,t,!1,!0).id,hasProp(q,e)||hasProp(E,e)}}),t||(o.undef=function(e){l();var n=a(e,t,!0),i=getOwn(E,e);r(e),delete q[e],delete P[n.url],delete S[e],eachReverse(j,function(t,n){t[0]===e&&j.splice(n,1)}),i&&(i.events.defined&&(S[e]=i.events),f(e))}),o},enable:function(e){var t=getOwn(E,e.id);t&&u(e).enable()},completeLoad:function(e){var t,n,r,o=getOwn(k.shim,e)||{},a=o.exports;for(l();j.length;){if(n=j.shift(),null===n[0]){if(n[0]=e,t)break;t=!0}else n[0]===e&&(t=!0);h(n)}if(r=getOwn(E,e),!t&&!hasProp(q,e)&&r&&!r.inited){if(!(!k.enforceDefine||a&&getGlobal(a)))return i(e)?void 0:s(makeError("nodefine","No define call for "+e,null,[e]));h([e,o.deps||[],o.exportsFn])}d()},nameToUrl:function(e,t,n){var r,i,o,a,u,c,s,l=getOwn(k.pkgs,e);if(l&&(e=l),s=getOwn(D,e))return x.nameToUrl(s,t,n);if(req.jsExtRegExp.test(e))u=e+(t||"");else{for(r=k.paths,i=e.split("/"),o=i.length;o>0;o-=1)if(a=i.slice(0,o).join("/"),c=getOwn(r,a)){isArray(c)&&(c=c[0]),i.splice(0,o,c);break}u=i.join("/"),u+=t||(/^data\:|\?/.test(u)||n?"":".js"),u=("/"===u.charAt(0)||u.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+u}return k.urlArgs?u+((-1===u.indexOf("?")?"?":"&")+k.urlArgs):u},load:function(e,t){req.load(x,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var t=m(e);x.completeLoad(t.id)}},onScriptError:function(e){var t=m(e);return i(t.id)?void 0:s(makeError("scripterror","Script error for: "+t.id,e,[t.id]))}},x.require=x.makeRequire(),x}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.11",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,t,n,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(t)?(e=t,t=n,n=r):e=[]),o&&o.context&&(a=o.context),i=getOwn(contexts,a),i||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,t,n)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var t=contexts[defContextName];return t.require[e].apply(t,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},req.load=function(e,t,n){var r,i=e&&e.config||{};if(isBrowser)return r=req.createNode(i,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=n,currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{importScripts(n),e.completeLoad(t)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+t+" at "+n,o,[t]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),isArray(t)||(n=t,t=null),!t&&isFunction(n)&&(t=[],n.length&&(n.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,t,n])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("requireLib",function(){}),function(){function e(e,t,n){for(var r=(n||0)-1,i=e?e.length:0;++r<i;)if(e[r]===t)return r;return-1}function t(t,n){var r=typeof n;if(t=t.cache,"boolean"==r||null==n)return t[n]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?n:y+n;return t=(t=t[r])&&t[i],"object"==r?t&&e(t,n)>-1?0:-1:t?0:-1}function n(e){var t=this.cache,n=typeof e;if("boolean"==n||null==e)t[e]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:y+e,i=t[n]||(t[n]={});"object"==n?(i[r]||(i[r]=[])).push(e):i[r]=!0}}function r(e){return e.charCodeAt(0)}function i(e,t){for(var n=e.criteria,r=t.criteria,i=-1,o=n.length;++i<o;){var a=n[i],u=r[i];if(a!==u){if(a>u||"undefined"==typeof a)return 1;if(u>a||"undefined"==typeof u)return-1}}return e.index-t.index}function o(e){var t=-1,r=e.length,i=e[0],o=e[r/2|0],a=e[r-1];if(i&&"object"==typeof i&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var u=c();u["false"]=u["null"]=u["true"]=u.undefined=!1;var s=c();for(s.array=e,s.cache=u,s.push=n;++t<r;)s.push(e[t]);return s}function a(e){return"\\"+X[e]}function u(){return g.pop()||[]}function c(){return m.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function s(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function l(e){e.length=0,g.length<w&&g.push(e)}function f(e){var t=e.cache;t&&f(t),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,m.length<w&&m.push(e)}function p(e,t,n){t||(t=0),"undefined"==typeof n&&(n=e?e.length:0);for(var r=-1,i=n-t||0,o=Array(0>i?0:i);++r<i;)o[r]=e[t+r];return o}function d(n){function g(e){return e&&"object"==typeof e&&!li(e)&&Ur.call(e,"__wrapped__")?e:new m(e)}function m(e,t){this.__chain__=!!t,this.__wrapped__=e}function w(e){function t(){if(r){var e=p(r);Gr.apply(e,arguments)}if(this instanceof t){var o=et(n.prototype),a=n.apply(o,e||arguments);return Rt(a)?a:o}return n.apply(i,e||arguments)}var n=e[0],r=e[2],i=e[4];return si(t,e),t}function X(e,t,n,r,i){if(n){var o=n(e);if("undefined"!=typeof o)return o}var a=Rt(e);if(!a)return e;var c=Rr.call(e);if(!H[c]||!ui.nodeClass&&s(e))return e;var f=oi[c];switch(c){case L:case z:return new f(+e);case U:case $:return new f(e);case K:return o=f(e.source,j.exec(e)),o.lastIndex=e.lastIndex,o}var d=li(e);if(t){var h=!r;r||(r=u()),i||(i=u());for(var g=r.length;g--;)if(r[g]==e)return i[g];o=d?f(e.length):{}}else o=d?p(e):wi({},e);return d&&(Ur.call(e,"index")&&(o.index=e.index),Ur.call(e,"input")&&(o.input=e.input)),t?(r.push(e),i.push(o),(d?xi:Ei)(e,function(e,a){o[a]=X(e,t,n,r,i)}),h&&(l(r),l(i)),o):o}function et(e){return Rt(e)?Jr(e):{}}function tt(e,t,n){if("function"!=typeof e)return ir;if("undefined"==typeof t||!("prototype"in e))return e;var r=e.__bindData__;if("undefined"==typeof r&&(ui.funcNames&&(r=!e.name),r=r||!ui.funcDecomp,!r)){var i=Fr.call(e);ui.funcNames||(r=!q.test(i)),r||(r=B.test(i),si(e,r))}if(r===!1||r!==!0&&1&r[1])return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return Fn(e,t)}function nt(e){function t(){var e=c?a:this;if(i){var h=p(i);Gr.apply(h,arguments)}if((o||l)&&(h||(h=p(arguments)),o&&Gr.apply(h,o),l&&h.length<u))return r|=16,nt([n,f?r:-4&r,h,null,a,u]);if(h||(h=arguments),s&&(n=e[d]),this instanceof t){e=et(n.prototype);var g=n.apply(e,h);return Rt(g)?g:e}return n.apply(e,h)}var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],c=1&r,s=2&r,l=4&r,f=8&r,d=n;return si(t,e),t}function rt(n,r){var i=-1,a=ht(),u=n?n.length:0,c=u>=x&&a===e,s=[];if(c){var l=o(r);l?(a=t,r=l):c=!1}for(;++i<u;){var p=n[i];a(r,p)<0&&s.push(p)}return c&&f(r),s}function ot(e,t,n,r){for(var i=(r||0)-1,o=e?e.length:0,a=[];++i<o;){var u=e[i];if(u&&"object"==typeof u&&"number"==typeof u.length&&(li(u)||bt(u))){t||(u=ot(u,t,n));var c=-1,s=u.length,l=a.length;for(a.length+=s;++c<s;)a[l++]=u[c]}else n||a.push(u)}return a}function at(e,t,n,r,i,o){if(n){var a=n(e,t);if("undefined"!=typeof a)return!!a}if(e===t)return 0!==e||1/e==1/t;var c=typeof e,f=typeof t;if(!(e!==e||e&&Y[c]||t&&Y[f]))return!1;if(null==e||null==t)return e===t;var p=Rr.call(e),d=Rr.call(t);if(p==N&&(p=G),d==N&&(d=G),p!=d)return!1;switch(p){case L:case z:return+e==+t;case U:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case K:case $:return e==Pr(t)}var h=p==I;if(!h){var g=Ur.call(e,"__wrapped__"),m=Ur.call(t,"__wrapped__");if(g||m)return at(g?e.__wrapped__:e,m?t.__wrapped__:t,n,r,i,o);if(p!=G||!ui.nodeClass&&(s(e)||s(t)))return!1;var v=!ui.argsObject&&bt(e)?jr:e.constructor,b=!ui.argsObject&&bt(t)?jr:t.constructor;if(v!=b&&!(Tt(v)&&v instanceof v&&Tt(b)&&b instanceof b)&&"constructor"in e&&"constructor"in t)return!1}var y=!i;i||(i=u()),o||(o=u());for(var x=i.length;x--;)if(i[x]==e)return o[x]==t;var w=0;if(a=!0,i.push(e),o.push(t),h){if(x=e.length,w=t.length,a=w==x,a||r)for(;w--;){var _=x,k=t[w];if(r)for(;_--&&!(a=at(e[_],k,n,r,i,o)););else if(!(a=at(e[w],k,n,r,i,o)))break}}else ki(t,function(t,u,c){return Ur.call(c,u)?(w++,a=Ur.call(e,u)&&at(e[u],t,n,r,i,o)):void 0}),a&&!r&&ki(e,function(e,t,n){return Ur.call(n,t)?a=--w>-1:void 0});return i.pop(),o.pop(),y&&(l(i),l(o)),a}function ut(e,t,n,r,i){(li(t)?nn:Ei)(t,function(t,o){var a,u,c=t,s=e[o];if(t&&((u=li(t))||Ci(t))){for(var l=r.length;l--;)if(a=r[l]==t){s=i[l];break}if(!a){var f;n&&(c=n(s,t),(f="undefined"!=typeof c)&&(s=c)),f||(s=u?li(s)?s:[]:Ci(s)?s:{}),r.push(t),i.push(s),f||ut(s,t,n,r,i)}}else n&&(c=n(s,t),"undefined"==typeof c&&(c=t)),"undefined"!=typeof c&&(s=c);e[o]=s})}function ct(e,t){return e+zr(ii()*(t-e+1))}function st(n,r,i){var a=-1,c=ht(),s=n?n.length:0,p=[],d=!r&&s>=x&&c===e,h=i||d?u():p;if(d){var g=o(h);c=t,h=g}for(;++a<s;){var m=n[a],v=i?i(m,a,n):m;(r?!a||h[h.length-1]!==v:c(h,v)<0)&&((i||d)&&h.push(v),p.push(m))}return d?(l(h.array),f(h)):i&&l(h),p}function lt(e){return function(t,n,r){var i={};if(n=g.createCallback(n,r,3),li(t))for(var o=-1,a=t.length;++o<a;){var u=t[o];e(i,u,n(u,o,t),t)}else xi(t,function(t,r,o){e(i,t,n(t,r,o),o)});return i}}function ft(e,t,n,r,i,o){var a=1&t,u=2&t,c=4&t,s=16&t,l=32&t;if(!u&&!Tt(e))throw new Dr;s&&!n.length&&(t&=-17,s=n=!1),l&&!r.length&&(t&=-33,l=r=!1);var f=e&&e.__bindData__;if(f&&f!==!0)return f=p(f),f[2]&&(f[2]=p(f[2])),f[3]&&(f[3]=p(f[3])),!a||1&f[1]||(f[4]=i),!a&&1&f[1]&&(t|=8),!c||4&f[1]||(f[5]=o),s&&Gr.apply(f[2]||(f[2]=[]),n),l&&Qr.apply(f[3]||(f[3]=[]),r),f[1]|=t,ft.apply(null,f);var d=1==t||17===t?w:nt;return d([e,t,n,r,i,o])}function pt(){J.shadowedProps=T,J.support=ui,J.array=J.bottom=J.loop=J.top="",J.init="iterable",J.useHas=!0;for(var e,t=0;e=arguments[t];t++)for(var n in e)J[n]=e[n];var r=J.args;J.firstArg=/^[^,]+/.exec(r)[0];var i=Er("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+ci(J)+"\n}");return i(tt,F,Br,Ur,b,bt,li,Ft,J.keys,Ar,Y,ai,$,Mr,Rr)}function dt(e){return mi[e]}function ht(){var t=(t=g.indexOf)===En?e:t;return t}function gt(e){return"function"==typeof e&&Nr.test(e)}function mt(e){var t,n;return!e||Rr.call(e)!=G||(t=e.constructor,Tt(t)&&!(t instanceof t))||!ui.argsClass&&bt(e)||!ui.nodeClass&&s(e)?!1:ui.ownLast?(ki(e,function(e,t,r){return n=Ur.call(r,t),!1}),n!==!1):(ki(e,function(e,t){n=t}),"undefined"==typeof n||Ur.call(e,n))}function vt(e){return vi[e]}function bt(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Rr.call(e)==N||!1}function yt(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n=t,t=!1),X(e,t,"function"==typeof n&&tt(n,r,1))}function xt(e,t,n){return X(e,!0,"function"==typeof t&&tt(t,n,1))}function wt(e,t){var n=et(e);return t?wi(n,t):n}function _t(e,t,n){var r;return t=g.createCallback(t,n,3),Ei(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r}function kt(e,t,n){var r;return t=g.createCallback(t,n,3),Ct(e,function(e,n,i){return t(e,n,i)?(r=n,!1):void 0}),r}function Et(e,t,n){var r=[];ki(e,function(e,t){r.push(t,e)});var i=r.length;for(t=tt(t,n,3);i--&&t(r[i--],r[i],e)!==!1;);return e}function Ct(e,t,n){var r=pi(e),i=r.length;for(t=tt(t,n,3);i--;){var o=r[i];if(t(e[o],o,e)===!1)break}return e}function St(e){var t=[];return ki(e,function(e,n){Tt(e)&&t.push(n)}),t.sort()}function jt(e,t){return e?Ur.call(e,t):!1}function qt(e){for(var t=-1,n=pi(e),r=n.length,i={};++t<r;){var o=n[t];i[e[o]]=o}return i}function Pt(e){return e===!0||e===!1||e&&"object"==typeof e&&Rr.call(e)==L||!1}function Dt(e){return e&&"object"==typeof e&&Rr.call(e)==z||!1}function Ot(e){return e&&1===e.nodeType||!1}function Bt(e){var t=!0;if(!e)return t;var n=Rr.call(e),r=e.length;return n==I||n==$||(ui.argsClass?n==N:bt(e))||n==G&&"number"==typeof r&&Tt(e.splice)?!r:(Ei(e,function(){return t=!1}),t)}function At(e,t,n,r){return at(e,t,"function"==typeof n&&tt(n,r,2))}function Mt(e){return Xr(e)&&!Zr(parseFloat(e))}function Tt(e){return"function"==typeof e}function Rt(e){return!(!e||!Y[typeof e])}function Nt(e){return Lt(e)&&e!=+e}function It(e){return null===e}function Lt(e){return"number"==typeof e||e&&"object"==typeof e&&Rr.call(e)==U||!1}function zt(e){return e&&Y[typeof e]&&Rr.call(e)==K||!1}function Ft(e){return"string"==typeof e||e&&"object"==typeof e&&Rr.call(e)==$||!1}function Wt(e){return"undefined"==typeof e}function Ut(e,t,n){var r={};return t=g.createCallback(t,n,3),Ei(e,function(e,n,i){r[n]=t(e,n,i)}),r}function Gt(e){var t=arguments,n=2;if(!Rt(e))return e;if("number"!=typeof t[2]&&(n=t.length),n>3&&"function"==typeof t[n-2])var r=tt(t[--n-1],t[n--],2);else n>2&&"function"==typeof t[n-1]&&(r=t[--n]);for(var i=p(arguments,1,n),o=-1,a=u(),c=u();++o<n;)ut(e,i[o],r,a,c);return l(a),l(c),e}function Kt(e,t,n){var r={};if("function"!=typeof t){var i=[];ki(e,function(e,t){i.push(t)}),i=rt(i,ot(arguments,!0,!1,1));for(var o=-1,a=i.length;++o<a;){var u=i[o];r[u]=e[u]}}else t=g.createCallback(t,n,3),ki(e,function(e,n,i){t(e,n,i)||(r[n]=e)});return r}function $t(e){for(var t=-1,n=pi(e),r=n.length,i=xr(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i}function Ht(e,t,n){var r={};if("function"!=typeof t)for(var i=-1,o=ot(arguments,!0,!1,1),a=Rt(e)?o.length:0;++i<a;){var u=o[i];u in e&&(r[u]=e[u])}else t=g.createCallback(t,n,3),ki(e,function(e,n,i){t(e,n,i)&&(r[n]=e)});return r}function Qt(e,t,n,r){var i=li(e);if(null==n)if(i)n=[];else{var o=e&&e.constructor,a=o&&o.prototype;n=et(a)}return t&&(t=g.createCallback(t,r,4),(i?xi:Ei)(e,function(e,r,i){return t(n,e,r,i)})),n}function Vt(e){for(var t=-1,n=pi(e),r=n.length,i=xr(r);++t<r;)i[t]=e[n[t]];return i}function Jt(e){var t=arguments,n=-1,r=ot(t,!0,!1,1),i=t[2]&&t[2][t[1]]===e?1:r.length,o=xr(i);for(ui.unindexedChars&&Ft(e)&&(e=e.split(""));++n<i;)o[n]=e[r[n]];return o}function Yt(e,t,n){var r=-1,i=ht(),o=e?e.length:0,a=!1;return n=(0>n?ti(0,o+n):n)||0,li(e)?a=i(e,t,n)>-1:"number"==typeof o?a=(Ft(e)?e.indexOf(t,n):i(e,t,n))>-1:xi(e,function(e){return++r>=n?!(a=e===t):void 0}),a}function Xt(e,t,n){var r=!0;if(t=g.createCallback(t,n,3),li(e))for(var i=-1,o=e.length;++i<o&&(r=!!t(e[i],i,e)););else xi(e,function(e,n,i){return r=!!t(e,n,i)});return r}function Zt(e,t,n){var r=[];if(t=g.createCallback(t,n,3),li(e))for(var i=-1,o=e.length;++i<o;){var a=e[i];t(a,i,e)&&r.push(a)}else xi(e,function(e,n,i){t(e,n,i)&&r.push(e)});return r}function en(e,t,n){if(t=g.createCallback(t,n,3),!li(e)){var r;return xi(e,function(e,n,i){return t(e,n,i)?(r=e,!1):void 0}),r}for(var i=-1,o=e.length;++i<o;){var a=e[i];if(t(a,i,e))return a}}function tn(e,t,n){var r;return t=g.createCallback(t,n,3),rn(e,function(e,n,i){return t(e,n,i)?(r=e,!1):void 0}),r}function nn(e,t,n){if(t&&"undefined"==typeof n&&li(e))for(var r=-1,i=e.length;++r<i&&t(e[r],r,e)!==!1;);else xi(e,t,n);return e}function rn(e,t,n){var r=e,i=e?e.length:0;if(t=t&&"undefined"==typeof n?t:tt(t,n,3),li(e))for(;i--&&t(e[i],i,e)!==!1;);else{if("number"!=typeof i){var o=pi(e);i=o.length}else ui.unindexedChars&&Ft(e)&&(r=e.split(""));xi(e,function(e,n,a){return n=o?o[--i]:--i,t(r[n],n,a)})}return e}function on(e,t){var n=p(arguments,2),r=-1,i="function"==typeof t,o=e?e.length:0,a=xr("number"==typeof o?o:0);return nn(e,function(e){a[++r]=(i?t:e[t]).apply(e,n)}),a}function an(e,t,n){var r=-1,i=e?e.length:0,o=xr("number"==typeof i?i:0);if(t=g.createCallback(t,n,3),li(e))for(;++r<i;)o[r]=t(e[r],r,e);else xi(e,function(e,n,i){o[++r]=t(e,n,i)});return o}function un(e,t,n){var i=-1/0,o=i;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&li(e))for(var a=-1,u=e.length;++a<u;){var c=e[a];c>o&&(o=c)}else t=null==t&&Ft(e)?r:g.createCallback(t,n,3),xi(e,function(e,n,r){var a=t(e,n,r);a>i&&(i=a,o=e)});return o}function cn(e,t,n){var i=1/0,o=i;if("function"!=typeof t&&n&&n[t]===e&&(t=null),null==t&&li(e))for(var a=-1,u=e.length;++a<u;){var c=e[a];o>c&&(o=c)}else t=null==t&&Ft(e)?r:g.createCallback(t,n,3),xi(e,function(e,n,r){var a=t(e,n,r);i>a&&(i=a,o=e)});return o}function sn(e,t,n,r){var i=arguments.length<3;if(t=g.createCallback(t,r,4),li(e)){var o=-1,a=e.length;for(i&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e)}else xi(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)});return n}function ln(e,t,n,r){var i=arguments.length<3;return t=g.createCallback(t,r,4),rn(e,function(e,r,o){n=i?(i=!1,e):t(n,e,r,o)}),n}function fn(e,t,n){return t=g.createCallback(t,n,3),Zt(e,function(e,n,r){return!t(e,n,r)})}function pn(e,t,n){if(e&&"number"!=typeof e.length?e=Vt(e):ui.unindexedChars&&Ft(e)&&(e=e.split("")),null==t||n)return e?e[ct(0,e.length-1)]:h;var r=dn(e);return r.length=ni(ti(0,t),r.length),r}function dn(e){var t=-1,n=e?e.length:0,r=xr("number"==typeof n?n:0);return nn(e,function(e){var n=ct(0,++t);r[t]=r[n],r[n]=e}),r}function hn(e){var t=e?e.length:0;return"number"==typeof t?t:pi(e).length}function gn(e,t,n){var r;if(t=g.createCallback(t,n,3),li(e))for(var i=-1,o=e.length;++i<o&&!(r=t(e[i],i,e)););else xi(e,function(e,n,i){return!(r=t(e,n,i))});return!!r}function mn(e,t,n){var r=-1,o=li(t),a=e?e.length:0,s=xr("number"==typeof a?a:0);for(o||(t=g.createCallback(t,n,3)),nn(e,function(e,n,i){var a=s[++r]=c();o?a.criteria=an(t,function(t){return e[t]}):(a.criteria=u())[0]=t(e,n,i),a.index=r,a.value=e}),a=s.length,s.sort(i);a--;){var p=s[a];s[a]=p.value,o||l(p.criteria),f(p)}return s}function vn(e){return e&&"number"==typeof e.length?ui.unindexedChars&&Ft(e)?e.split(""):p(e):Vt(e)}function bn(e){for(var t=-1,n=e?e.length:0,r=[];++t<n;){var i=e[t];i&&r.push(i)}return r}function yn(e){return rt(e,ot(arguments,!0,!0,1))}function xn(e,t,n){var r=-1,i=e?e.length:0;for(t=g.createCallback(t,n,3);++r<i;)if(t(e[r],r,e))return r;return-1}function wn(e,t,n){var r=e?e.length:0;for(t=g.createCallback(t,n,3);r--;)if(t(e[r],r,e))return r;return-1}function _n(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=g.createCallback(t,n,3);++o<i&&t(e[o],o,e);)r++}else if(r=t,null==r||n)return e?e[0]:h;return p(e,0,ni(ti(0,r),i))}function kn(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(e=an(e,n,r)),ot(e,t)}function En(t,n,r){if("number"==typeof r){var i=t?t.length:0;
r=0>r?ti(0,i+r):r||0}else if(r){var o=An(t,n);return t[o]===n?o:-1}return e(t,n,r)}function Cn(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var o=i;for(t=g.createCallback(t,n,3);o--&&t(e[o],o,e);)r++}else r=null==t||n?1:t||r;return p(e,0,ni(ti(0,i-r),i))}function Sn(){for(var n=[],r=-1,i=arguments.length,a=u(),c=ht(),s=c===e,p=u();++r<i;){var d=arguments[r];(li(d)||bt(d))&&(n.push(d),a.push(s&&d.length>=x&&o(r?n[r]:p)))}var h=n[0],g=-1,m=h?h.length:0,v=[];e:for(;++g<m;){var b=a[0];if(d=h[g],(b?t(b,d):c(p,d))<0){for(r=i,(b||p).push(d);--r;)if(b=a[r],(b?t(b,d):c(n[r],d))<0)continue e;v.push(d)}}for(;i--;)b=a[i],b&&f(b);return l(a),l(p),v}function jn(e,t,n){var r=0,i=e?e.length:0;if("number"!=typeof t&&null!=t){var o=i;for(t=g.createCallback(t,n,3);o--&&t(e[o],o,e);)r++}else if(r=t,null==r||n)return e?e[i-1]:h;return p(e,ti(0,i-r))}function qn(e,t,n){var r=e?e.length:0;for("number"==typeof n&&(r=(0>n?ti(0,r+n):ni(n,r-1))+1);r--;)if(e[r]===t)return r;return-1}function Pn(e){for(var t=arguments,n=0,r=t.length,i=e?e.length:0;++n<r;)for(var o=-1,a=t[n];++o<i;)e[o]===a&&(Hr.call(e,o--,1),i--);return e}function Dn(e,t,n){e=+e||0,n="number"==typeof n?n:+n||1,null==t&&(t=e,e=0);for(var r=-1,i=ti(0,Ir((t-e)/(n||1))),o=xr(i);++r<i;)o[r]=e,e+=n;return o}function On(e,t,n){var r=-1,i=e?e.length:0,o=[];for(t=g.createCallback(t,n,3);++r<i;){var a=e[r];t(a,r,e)&&(o.push(a),Hr.call(e,r--,1),i--)}return o}function Bn(e,t,n){if("number"!=typeof t&&null!=t){var r=0,i=-1,o=e?e.length:0;for(t=g.createCallback(t,n,3);++i<o&&t(e[i],i,e);)r++}else r=null==t||n?1:ti(0,t);return p(e,r)}function An(e,t,n,r){var i=0,o=e?e.length:i;for(n=n?g.createCallback(n,r,1):ir,t=n(t);o>i;){var a=i+o>>>1;n(e[a])<t?i=a+1:o=a}return i}function Mn(){return st(ot(arguments,!0,!0))}function Tn(e,t,n,r){return"boolean"!=typeof t&&null!=t&&(r=n,n="function"!=typeof t&&r&&r[t]===e?null:t,t=!1),null!=n&&(n=g.createCallback(n,r,3)),st(e,t,n)}function Rn(e){return rt(e,p(arguments,1))}function Nn(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(li(n)||bt(n))var r=r?st(rt(r,n).concat(rt(n,r))):n}return r||[]}function In(){for(var e=arguments.length>1?arguments:arguments[0],t=-1,n=e?un(Pi(e,"length")):0,r=xr(0>n?0:n);++t<n;)r[t]=Pi(e,t);return r}function Ln(e,t){var n=-1,r=e?e.length:0,i={};for(t||!r||li(e[0])||(t=[]);++n<r;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function zn(e,t){if(!Tt(t))throw new Dr;return function(){return--e<1?t.apply(this,arguments):void 0}}function Fn(e,t){return arguments.length>2?ft(e,17,p(arguments,2),null,t):ft(e,1,null,null,t)}function Wn(e){for(var t=arguments.length>1?ot(arguments,!0,!1,1):St(e),n=-1,r=t.length;++n<r;){var i=t[n];e[i]=ft(e[i],1,null,null,e)}return e}function Un(e,t){return arguments.length>2?ft(t,19,p(arguments,2),null,e):ft(t,3,null,null,e)}function Gn(){for(var e=arguments,t=e.length;t--;)if(!Tt(e[t]))throw new Dr;return function(){for(var t=arguments,n=e.length;n--;)t=[e[n].apply(this,t)];return t[0]}}function Kn(e,t){return t="number"==typeof t?t:+t||e.length,ft(e,4,null,null,null,t)}function $n(e,t,n){var r,i,o,a,u,c,s,l=0,f=!1,p=!0;if(!Tt(e))throw new Dr;if(t=ti(0,t)||0,n===!0){var d=!0;p=!1}else Rt(n)&&(d=n.leading,f="maxWait"in n&&(ti(t,n.maxWait)||0),p="trailing"in n?n.trailing:p);var g=function(){var n=t-(Oi()-a);if(0>=n){i&&Lr(i);var f=s;i=c=s=h,f&&(l=Oi(),o=e.apply(u,r),c||i||(r=u=null))}else c=$r(g,n)},m=function(){c&&Lr(c),i=c=s=h,(p||f!==t)&&(l=Oi(),o=e.apply(u,r),c||i||(r=u=null))};return function(){if(r=arguments,a=Oi(),u=this,s=p&&(c||!d),f===!1)var n=d&&!c;else{i||d||(l=a);var h=f-(a-l),v=0>=h;v?(i&&(i=Lr(i)),l=a,o=e.apply(u,r)):i||(i=$r(m,h))}return v&&c?c=Lr(c):c||t===f||(c=$r(g,t)),n&&(v=!0,o=e.apply(u,r)),!v||c||i||(r=u=null),o}}function Hn(e){if(!Tt(e))throw new Dr;var t=p(arguments,1);return $r(function(){e.apply(h,t)},1)}function Qn(e,t){if(!Tt(e))throw new Dr;var n=p(arguments,2);return $r(function(){e.apply(h,n)},t)}function Vn(e,t){if(!Tt(e))throw new Dr;var n=function(){var r=n.cache,i=t?t.apply(this,arguments):y+arguments[0];return Ur.call(r,i)?r[i]:r[i]=e.apply(this,arguments)};return n.cache={},n}function Jn(e){var t,n;if(!Tt(e))throw new Dr;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}}function Yn(e){return ft(e,16,p(arguments,1))}function Xn(e){return ft(e,32,null,p(arguments,1))}function Zn(e,t,n){var r=!0,i=!0;if(!Tt(e))throw new Dr;return n===!1?r=!1:Rt(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),Q.leading=r,Q.maxWait=t,Q.trailing=i,$n(e,t,Q)}function er(e,t){return ft(t,16,[e])}function tr(e){return function(){return e}}function nr(e,t,n){var r=typeof e;if(null==e||"function"==r)return tt(e,t,n);if("object"!=r)return cr(e);var i=pi(e),o=i[0],a=e[o];return 1!=i.length||a!==a||Rt(a)?function(t){for(var n=i.length,r=!1;n--&&(r=at(t[i[n]],e[i[n]],null,!0)););return r}:function(e){var t=e[o];return a===t&&(0!==a||1/a==1/t)}}function rr(e){return null==e?"":Pr(e).replace(yi,dt)}function ir(e){return e}function or(e,t,n){var r=!0,i=t&&St(t);t&&(n||i.length)||(null==n&&(n=t),o=m,t=e,e=g,i=St(t)),n===!1?r=!1:Rt(n)&&"chain"in n&&(r=n.chain);var o=e,a=Tt(o);nn(i,function(n){var i=e[n]=t[n];a&&(o.prototype[n]=function(){var t=this.__chain__,n=this.__wrapped__,a=[n];Gr.apply(a,arguments);var u=i.apply(e,a);if(r||t){if(n===u&&Rt(u))return this;u=new o(u),u.__chain__=t}return u})})}function ar(){return n._=Tr,this}function ur(){}function cr(e){return function(t){return t[e]}}function sr(e,t,n){var r=null==e,i=null==t;if(null==n&&("boolean"==typeof e&&i?(n=e,e=1):i||"boolean"!=typeof t||(n=t,i=!0)),r&&i&&(t=1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=ii();return ni(e+o*(t-e+parseFloat("1e-"+((o+"").length-1))),t)}return ct(e,t)}function lr(e,t){if(e){var n=e[t];return Tt(n)?e[t]():n}}function fr(e,t,n){var r=g.templateSettings;e=Pr(e||""),n=ci?_i({},n,r):r;var i,o=ci&&_i({},n.imports,r.imports),u=ci?pi(o):["_"],c=ci?Vt(o):[g],s=0,l=n.interpolate||O,f="__p += '",p=qr((n.escape||O).source+"|"+l.source+"|"+(l===P?S:O).source+"|"+(n.evaluate||O).source+"|$","g");e.replace(p,function(t,n,r,o,u,c){return r||(r=o),f+=e.slice(s,c).replace(A,a),n&&(f+="' +\n__e("+n+") +\n'"),u&&(i=!0,f+="';\n"+u+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),s=c+t.length,t}),f+="';\n";var d=n.variable,m=d;m||(d="obj",f="with ("+d+") {\n"+f+"\n}\n"),f=(i?f.replace(k,""):f).replace(E,"$1").replace(C,"$1;"),f="function("+d+") {\n"+(m?"":d+" || ("+d+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+R++ +"]")+"\n*/";try{var b=Er(u,"return "+f+v).apply(h,c)}catch(y){throw y.source=f,y}return t?b(t):(b.source=f,b)}function pr(e,t,n){e=(e=+e)>-1?e:0;var r=-1,i=xr(e);for(t=tt(t,n,1);++r<e;)i[r]=t(r);return i}function dr(e){return null==e?"":Pr(e).replace(bi,vt)}function hr(e){var t=++v;return Pr(null==e?"":e)+t}function gr(e){return e=new m(e),e.__chain__=!0,e}function mr(e,t){return t(e),e}function vr(){return this.__chain__=!0,this}function br(){return Pr(this.__wrapped__)}function yr(){return this.__wrapped__}n=n?it.defaults(Z.Object(),n,it.pick(Z,M)):Z;var xr=n.Array,wr=n.Boolean,_r=n.Date,kr=n.Error,Er=n.Function,Cr=n.Math,Sr=n.Number,jr=n.Object,qr=n.RegExp,Pr=n.String,Dr=n.TypeError,Or=[],Br=kr.prototype,Ar=jr.prototype,Mr=Pr.prototype,Tr=n._,Rr=Ar.toString,Nr=qr("^"+Pr(Rr).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Ir=Cr.ceil,Lr=n.clearTimeout,zr=Cr.floor,Fr=Er.prototype.toString,Wr=gt(Wr=jr.getPrototypeOf)&&Wr,Ur=Ar.hasOwnProperty,Gr=Or.push,Kr=Ar.propertyIsEnumerable,$r=n.setTimeout,Hr=Or.splice,Qr=Or.unshift,Vr=function(){try{var e={},t=gt(t=jr.defineProperty)&&t,n=t(e,e,e)&&t}catch(r){}return n}(),Jr=gt(Jr=jr.create)&&Jr,Yr=gt(Yr=xr.isArray)&&Yr,Xr=n.isFinite,Zr=n.isNaN,ei=gt(ei=jr.keys)&&ei,ti=Cr.max,ni=Cr.min,ri=n.parseInt,ii=Cr.random,oi={};oi[I]=xr,oi[L]=wr,oi[z]=_r,oi[W]=Er,oi[G]=jr,oi[U]=Sr,oi[K]=qr,oi[$]=Pr;var ai={};ai[I]=ai[z]=ai[U]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},ai[L]=ai[$]={constructor:!0,toString:!0,valueOf:!0},ai[F]=ai[W]=ai[K]={constructor:!0,toString:!0},ai[G]={constructor:!0},function(){for(var e=T.length;e--;){var t=T[e];for(var n in ai)Ur.call(ai,n)&&!Ur.call(ai[n],t)&&(ai[n][t]=!1)}}(),m.prototype=g.prototype;var ui=g.support={};!function(){var e=function(){this.x=1},t={0:1,length:1},r=[];e.prototype={valueOf:1,y:1};for(var i in new e)r.push(i);for(i in arguments);ui.argsClass=Rr.call(arguments)==N,ui.argsObject=arguments.constructor==jr&&!(arguments instanceof xr),ui.enumErrorProps=Kr.call(Br,"message")||Kr.call(Br,"name"),ui.enumPrototypes=Kr.call(e,"prototype"),ui.funcDecomp=!gt(n.WinRTError)&&B.test(d),ui.funcNames="string"==typeof Er.name,ui.nonEnumArgs=0!=i,ui.nonEnumShadows=!/valueOf/.test(r),ui.ownLast="x"!=r[0],ui.spliceObjects=(Or.splice.call(t,0,1),!t[0]),ui.unindexedChars="x"[0]+jr("x")[0]!="xx";try{ui.nodeClass=!(Rr.call(document)==G&&!({toString:0}+""))}catch(o){ui.nodeClass=!0}}(1),g.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:P,variable:"",imports:{_:g}};var ci=fr("var index, iterable = <%= firstArg %>, result = <%= init %>;\nif (!iterable) return result;\n<%= top %>;<% if (array) { %>\nvar length = iterable.length; index = -1;\nif (<%= array %>) {  <% if (support.unindexedChars) { %>\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  <% } %>\n  while (++index < length) {\n    <%= loop %>;\n  }\n}\nelse {  <% } else if (support.nonEnumArgs) { %>\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      <%= loop %>;\n    }\n  } else {  <% } %>  <% if (support.enumPrototypes) { %>\n  var skipProto = typeof iterable == 'function';\n  <% } %>  <% if (support.enumErrorProps) { %>\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  <% } %>  <%    var conditions = [];    if (support.enumPrototypes) { conditions.push('!(skipProto && index == \"prototype\")'); }    if (support.enumErrorProps)  { conditions.push('!(skipErrorProps && (index == \"message\" || index == \"name\"))'); }  %>  <% if (useHas && keys) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n<%    if (conditions.length) { %>    if (<%= conditions.join(' && ') %>) {\n  <% } %>    <%= loop %>;    <% if (conditions.length) { %>\n    }<% } %>\n  }  <% } else { %>\n  for (index in iterable) {\n<%    if (useHas) { conditions.push(\"hasOwnProperty.call(iterable, index)\"); }    if (conditions.length) { %>    if (<%= conditions.join(' && ') %>) {\n  <% } %>    <%= loop %>;    <% if (conditions.length) { %>\n    }<% } %>\n  }    <% if (support.nonEnumShadows) { %>\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      <% for (k = 0; k < 7; k++) { %>\n    index = '<%= shadowedProps[k] %>';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))<%        if (!useHas) { %> || (!nonEnum[index] && iterable[index] !== objectProto[index])<% }      %>) {\n      <%= loop %>;\n    }      <% } %>\n  }    <% } %>  <% } %>  <% if (array || support.nonEnumArgs) { %>\n}<% } %>\n<%= bottom %>;\nreturn result");Jr||(et=function(){function e(){}return function(t){if(Rt(t)){e.prototype=t;var r=new e;e.prototype=null}return r||n.Object()}}());var si=Vr?function(e,t){V.value=t,Vr(e,"__bindData__",V)}:ur;ui.argsClass||(bt=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ur.call(e,"callee")&&!Kr.call(e,"callee")||!1});var li=Yr||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Rr.call(e)==I||!1},fi=pt({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),pi=ei?function(e){return Rt(e)?ui.enumPrototypes&&"function"==typeof e||ui.nonEnumArgs&&e.length&&bt(e)?fi(e):ei(e):[]}:fi,di={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:pi,loop:"if (callback(iterable[index], index, collection) === false) return result"},hi={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:pi,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},gi={top:"if (!objectTypes[typeof iterable]) return result;\n"+di.top,array:!1},mi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vi=qt(mi),bi=qr("("+pi(vi).join("|")+")","g"),yi=qr("["+pi(mi).join("")+"]","g"),xi=pt(di),wi=pt(hi,{top:hi.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),_i=pt(hi),ki=pt(di,gi,{useHas:!1}),Ei=pt(di,gi);Tt(/x/)&&(Tt=function(e){return"function"==typeof e&&Rr.call(e)==W});var Ci=Wr?function(e){if(!e||Rr.call(e)!=G||!ui.argsClass&&bt(e))return!1;var t=e.valueOf,n=gt(t)&&(n=Wr(t))&&Wr(n);return n?e==n||Wr(e)==n:mt(e)}:mt,Si=lt(function(e,t,n){Ur.call(e,n)?e[n]++:e[n]=1}),ji=lt(function(e,t,n){(Ur.call(e,n)?e[n]:e[n]=[]).push(t)}),qi=lt(function(e,t,n){e[n]=t}),Pi=an,Di=Zt,Oi=gt(Oi=_r.now)&&Oi||function(){return(new _r).getTime()},Bi=8==ri(_+"08")?ri:function(e,t){return ri(Ft(e)?e.replace(D,""):e,t||0)};return g.after=zn,g.assign=wi,g.at=Jt,g.bind=Fn,g.bindAll=Wn,g.bindKey=Un,g.chain=gr,g.compact=bn,g.compose=Gn,g.constant=tr,g.countBy=Si,g.create=wt,g.createCallback=nr,g.curry=Kn,g.debounce=$n,g.defaults=_i,g.defer=Hn,g.delay=Qn,g.difference=yn,g.filter=Zt,g.flatten=kn,g.forEach=nn,g.forEachRight=rn,g.forIn=ki,g.forInRight=Et,g.forOwn=Ei,g.forOwnRight=Ct,g.functions=St,g.groupBy=ji,g.indexBy=qi,g.initial=Cn,g.intersection=Sn,g.invert=qt,g.invoke=on,g.keys=pi,g.map=an,g.mapValues=Ut,g.max=un,g.memoize=Vn,g.merge=Gt,g.min=cn,g.omit=Kt,g.once=Jn,g.pairs=$t,g.partial=Yn,g.partialRight=Xn,g.pick=Ht,g.pluck=Pi,g.property=cr,g.pull=Pn,g.range=Dn,g.reject=fn,g.remove=On,g.rest=Bn,g.shuffle=dn,g.sortBy=mn,g.tap=mr,g.throttle=Zn,g.times=pr,g.toArray=vn,g.transform=Qt,g.union=Mn,g.uniq=Tn,g.values=Vt,g.where=Di,g.without=Rn,g.wrap=er,g.xor=Nn,g.zip=In,g.zipObject=Ln,g.collect=an,g.drop=Bn,g.each=nn,g.eachRight=rn,g.extend=wi,g.methods=St,g.object=Ln,g.select=Zt,g.tail=Bn,g.unique=Tn,g.unzip=In,or(g),g.clone=yt,g.cloneDeep=xt,g.contains=Yt,g.escape=rr,g.every=Xt,g.find=en,g.findIndex=xn,g.findKey=_t,g.findLast=tn,g.findLastIndex=wn,g.findLastKey=kt,g.has=jt,g.identity=ir,g.indexOf=En,g.isArguments=bt,g.isArray=li,g.isBoolean=Pt,g.isDate=Dt,g.isElement=Ot,g.isEmpty=Bt,g.isEqual=At,g.isFinite=Mt,g.isFunction=Tt,g.isNaN=Nt,g.isNull=It,g.isNumber=Lt,g.isObject=Rt,g.isPlainObject=Ci,g.isRegExp=zt,g.isString=Ft,g.isUndefined=Wt,g.lastIndexOf=qn,g.mixin=or,g.noConflict=ar,g.noop=ur,g.now=Oi,g.parseInt=Bi,g.random=sr,g.reduce=sn,g.reduceRight=ln,g.result=lr,g.runInContext=d,g.size=hn,g.some=gn,g.sortedIndex=An,g.template=fr,g.unescape=dr,g.uniqueId=hr,g.all=Xt,g.any=gn,g.detect=en,g.findWhere=en,g.foldl=sn,g.foldr=ln,g.include=Yt,g.inject=sn,or(function(){var e={};return Ei(g,function(t,n){g.prototype[n]||(e[n]=t)}),e}(),!1),g.first=_n,g.last=jn,g.sample=pn,g.take=_n,g.head=_n,Ei(g,function(e,t){var n="sample"!==t;g.prototype[t]||(g.prototype[t]=function(t,r){var i=this.__chain__,o=e(this.__wrapped__,t,r);return i||null!=t&&(!r||n&&"function"==typeof t)?new m(o,i):o})}),g.VERSION="2.4.1",g.prototype.chain=vr,g.prototype.toString=br,g.prototype.value=yr,g.prototype.valueOf=yr,xi(["join","pop","shift"],function(e){var t=Or[e];g.prototype[e]=function(){var e=this.__chain__,n=t.apply(this.__wrapped__,arguments);return e?new m(n,e):n}}),xi(["push","reverse","sort","unshift"],function(e){var t=Or[e];g.prototype[e]=function(){return t.apply(this.__wrapped__,arguments),this}}),xi(["concat","slice","splice"],function(e){var t=Or[e];g.prototype[e]=function(){return new m(t.apply(this.__wrapped__,arguments),this.__chain__)}}),ui.spliceObjects||xi(["pop","shift","splice"],function(e){var t=Or[e],n="splice"==e;g.prototype[e]=function(){var e=this.__chain__,r=this.__wrapped__,i=t.apply(r,arguments);return 0===r.length&&delete r[0],e||n?new m(i,e):i}}),g._baseEach=xi,g._iteratorTemplate=ci,g._shimKeys=fi,g}var h,g=[],m=[],v=0,b={},y=+new Date+"",x=75,w=40,_=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",k=/\b__p \+= '';/g,E=/\b(__p \+=) '' \+/g,C=/(__e\(.*?\)|\b__t\)) \+\n'';/g,S=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,j=/\w*$/,q=/^\s*function[ \n\r\t]+\w/,P=/<%=([\s\S]+?)%>/g,D=RegExp("^["+_+"]*0+(?=.$)"),O=/($^)/,B=/\bthis\b/,A=/['\n\r\t\u2028\u2029\\]/g,M=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],T=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],R=0,N="[object Arguments]",I="[object Array]",L="[object Boolean]",z="[object Date]",F="[object Error]",W="[object Function]",U="[object Number]",G="[object Object]",K="[object RegExp]",$="[object String]",H={};H[W]=!1,H[N]=H[I]=H[L]=H[z]=H[U]=H[G]=H[K]=H[$]=!0;var Q={leading:!1,maxWait:0,trailing:!1},V={configurable:!1,enumerable:!1,value:null,writable:!1},J={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},Y={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},X={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Z=Y[typeof window]&&window||this,et=Y[typeof exports]&&exports&&!exports.nodeType&&exports,tt=Y[typeof module]&&module&&!module.nodeType&&module,nt=tt&&tt.exports===et&&et,rt=Y[typeof global]&&global;!rt||rt.global!==rt&&rt.window!==rt||(Z=rt);var it=d();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=it,define("lodash",[],function(){return it})):et&&tt?nt?(tt.exports=it)._=it:et._=it:Z._=it}.call(this),define("config",[],function(){var e=Box2D.Common.Math.b2Vec2,t=document.getElementsByTagName("canvas")[0],n=t.getContext("2d");n.font='12pt "Clear Sans", "Helvetica Neue", Arial, sans-serif';var r={4096:{color:"#000",fontColor:"#fff",fontSize:"",fontPos:[]},2048:{color:"#edc22e",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},1024:{color:"#edc53f",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},512:{color:"#edc850",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},256:{color:"#edcc61",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},128:{color:"#edcf72",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},64:{color:"#f65e3b",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},32:{color:"#f67c5f",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},16:{color:"#f59563",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},8:{color:"#f2b179",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},4:{color:"#ede0c8",fontColor:"#776e65",fontSize:"",fontPos:[]},2:{color:"#eee4da",fontColor:"#776e65",fontSize:"",fontPos:[]}};return{alallowSleep:!0,canvas:t,context:n,gravity:new e(0,5),scale:30,boxSettings:r,splitImpulse:30}}),define("events",[],function(){var e={};return{on:function(t,n,r){var i={fn:n,context:r};return e[t]?void e[t].push(i):void(e[t]=[i])},off:function(t){delete e[t]},trigger:function(t){var n=Array.prototype.slice.call(arguments);n.shift();var r=e[t];r&&r.forEach(function(e){e.fn.apply(e.context,n)})}}}),define("contact-listener",["lodash"],function(e){var t=e.curry(function(e,t){return e===t[0]||e===t[1]}),n=function(e){return r.contacts.filter(t(e)).length>0},r={contacts:[],reset:function(){r.contacts=[]},BeginContact:function(e){var t=e.m_fixtureA.GetBody().GetUserData(),i=e.m_fixtureB.GetBody().GetUserData();t.value&&i.value&&t.value===i.value&&(n(t)||n(i)||r.contacts.push([t,i]))},EndContact:function(){},PreSolve:function(){},PostSolve:function(){}};return r}),define("box2d.setup",["config","contact-listener"],function(e,t){var n=(Box2D.Common.Math.b2Vec2,Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2Body,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2Fixture,Box2D.Collision.Shapes.b2MassData,Box2D.Collision.Shapes.b2PolygonShape,Box2D.Collision.Shapes.b2CircleShape,Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2World),r=new n(e.gravity,e.allowSleep);r.SetContactListener(t);var i=1/60,o=function(){r.Step(i,10,10),r.ClearForces()};return{world:r,step:o}}),define("box2d.utils",["config","box2d.setup"],function(e,t){var n=Box2D.Collision.b2AABB,r=e.scale,i=t.world,o=function(e){return e/r},a=function(e){return e*r},u=function(e,t){var r=new n;r.lowerBound.Set(t.x-.001,t.y-.001),r.upperBound.Set(t.x+.001,t.y+.001),i.QueryAABB(function(t){var n=t.GetBody();return n.SetAwake(!0),e&&e(n),!1},r)};return{p2u:o,u2p:a,getBodyAt:u}}),define("is-mobile",[],function(){return function(e,t){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera,"http://detectmobilebrowser.com/mobile")}),define("controls",["lodash","events","config","box2d.utils","is-mobile"],function(e,t,n,r,i){var o=n.canvas,a=(r.u2p,r.p2u),u=r.getBodyAt,c=i?"touchdown":"mousedown",s=i?"touchup":"mouseup",l=function(e){t.trigger("tap:body",e)},f=function(e){return{x:a(e.x),y:a(e.y)}},p=function(e){return e.preventDefault(),e.stopPropagation(),e},d=e.compose(e.curry(u)(l),f,p),h=function(){o.addEventListener(c,p),o.addEventListener(s,d)},g=function(){o.removeEventListener(c,p),o.removeEventListener(s,d)};return{activate:h,deactivate:g}}),define("box",[],function(){var e=Box2D.Dynamics.b2Body,t=Box2D.Dynamics.b2BodyDef,n=Box2D.Dynamics.b2FixtureDef,r=Box2D.Collision.Shapes.b2PolygonShape,i=0,o=function(o,a,u,c){this.id=++i,this.width=u,this.height=c,this.init=function(i){this.fixDef=new n,this.fixDef.density=1,this.fixDef.friction=.5,this.fixDef.restitution=.2,this.fixDef.shape=new r,this.fixDef.shape.SetAsBox(u,c),this.bodyDef=new t,this.bodyDef.type=i?e.b2_staticBody:e.b2_dynamicBody,this.bodyDef.position.Set(o,a),this.bodyDef.userData=this}};return o}),define("box-factory",["config","box2d.setup","box2d.utils","box"],function(e,t,n,r){var i=e.splitImpulse,o=Box2D.Common.Math.b2Vec2,a=n.p2u,u=(n.u2p,t.world),c={},s=function(e,t,n,i,o){e||(e=t=n=i=1);var a=new r(e,t,n,i);return a.init(o),a.body=u.CreateBody(a.bodyDef),a.body.CreateFixture(a.fixDef),c[a.id]=a,a},l=function(e){c[e.id]=void 0,delete c[e.id],u.DestroyBody(e.body)},f=function(e){var t=e.body.GetWorldCenter();if(2!==e.value){l(e);var n,r,a,u,c,f,p,d,h,g;e.width>e.height?(n=t.x-e.width/2-.05,a=t.x+e.width/2+.05,r=u=t.y,c=e.width/2,f=e.height,p=new o(-c*f*i,0),d=new o(c*f*i,0)):(n=a=t.x,r=t.y-e.height/2-.05,u=t.y+e.height/2+.05,c=e.width,f=e.height/2,p=new o(0,-c*f*i),d=new o(0,c*f*i)),h=s(n,r,c,f),g=s(a,u,c,f),h.value=e.value/2,g.value=e.value/2,h.body.ApplyImpulse(p,new o(n,r)),g.body.ApplyImpulse(d,new o(a,u))}},p=function(e,t){var n,r,i,o=e.width,a=e.height,u=e.body.GetWorldCenter(),c=t.body.GetWorldCenter(),f=2*e.value;o>a?(i=u.y<c.y?u:c,a*=2,n=i.x,r=i.y-e.height/4):(i=u.x<c.x?u:c,o*=2,n=i.x-e.width/4,r=i.y),l(e),l(t),s(n,r,o,a).value=f};return createWalls=function(){var e=a(window.innerWidth),t=a(window.innerHeight);s(e/2,-2,e,2,!0),s(e+2,t/2,2,t,!0),s(e/2,t+2,e,2,!0),s(-2,t/2,2,t,!0)},{boxes:c,create:s,createWalls:createWalls,remove:l,splitBox:f,joinBoxes:p}}),define("modal",[],function(){var e=document.getElementsByClassName("modal")[0],t=document.getElementsByClassName("modal-content")[0],n=document.getElementsByClassName("modal-score")[0],r=document.getElementsByClassName("twitter-share-button")[0];e.style.cssText=["position: fixed","top: 0","left: 0","right: 0","bottom: 0"].join(";"),t.style.cssText=["width: 300px","background-color: rgba(0, 0, 0, 0.5)","margin: 50px auto","padding: 20px"].join(";");var i={content:t,show:function(t){t||(t=0),n.innerText=t,r.dataset.text="I completed From 2048 with score "+t+"!",!function(e,t,n){var r,i=e.getElementsByTagName(t)[0],o=/^http:/.test(e.location)?"http":"https";e.getElementById(n)||(r=e.createElement(t),r.id=n,r.src=o+"://platform.twitter.com/widgets.js",i.parentNode.insertBefore(r,i))}(document,"script","twitter-wjs"),e.style.display="block"},hide:function(){e.style.display="none"}};return i.hide(),document.body.appendChild(e),i}),define("score",["lodash"],function(e){var t=document.createElement("div");document.body.appendChild(t),t.style.cssText=["position: fixed","top: 0","right: 10px","font-family: arial","color: #333","font-size: 16px"].join(";");var n=document.createElement("p");t.appendChild(n);var r={total:document.createElement("span"),max:document.createElement("span")};e.forEach(r,function(e){n.appendChild(e)});var i={total:0,max:0,allTime:0,more:function(e){i.total+=e,i.total>i.max&&(i.max=i.total)},less:function(e){i.total-=e},reset:function(){i.total=0,i.max=0},draw:function(){r.total.innerText="Score: "+i.total,r.max.innerText="Best: "+i.max}};return i}),define("request-animation-frame",[],function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}),define("particles",["lodash","config","request-animation-frame"],function(e,t){var n=t.context,r=.9,i=0,o=1,a=2,u=3,c=4,s=5,l=6,f=7,p=8,d=9,h=function(){return Math.random()<.5?-1:1},g=function(e){return Date.now()-e[p]<e[f]},m=function(e){e[c]*=r,e[a]*=r,e[i]+=e[a]+e[c],e[s]*=r,e[u]*=r,e[o]+=e[u]+e[s]},v=function(e){n.beginPath();var t=n.createRadialGradient(e[i],e[o],0,e[i],e[o],e[d]);t.addColorStop(0,"rgba(255, 255, 255, 0.5)"),t.addColorStop(.4,"rgba(255, 255, 255, 0.5)"),t.addColorStop(.4,e[l]),t.addColorStop(.9,"rgba(255, 255, 255, 0.5)"),t.addColorStop(1,"rgba(255, 255, 255, 0)"),n.fillStyle=t,n.arc(e[i],e[o],e[d],2*Math.PI,!1),n.fill()},b={mine:[],create:function(e,t,n){n||(n="rgba(237, 194, 46, 0.5)");var r=[e,t,h()*Math.random(),h()*Math.random(),h()*Math.random(),h()*Math.random(),n,500,Date.now(),10*Math.random()+15];b.mine.push(r)},remove:function(){var e=b.mine.filter(g);delete b.mine,b.mine=e},update:function(){b.mine.forEach(m)},draw:function(){b.mine.forEach(v)}},y=function(e,t,n){for(var r=0;n>r;r++)b.create(e,t)},x=function(){b.mine.length&&(b.remove(),b.update(),b.draw())};return{emit:y,loop:x}}),define("game",["lodash","config","box2d.setup","box2d.utils","events","controls","box-factory","contact-listener","modal","score","particles"],function(e,t,n,r,i,o,a,u,c,s,l){var f={},p=t.context,d=t.canvas,h=t.boxSettings,g=(n.world,n.step),m=r.p2u,v=r.u2p,b=function(e){var t=e.GetUserData();if(i.trigger("box:split",t),t.value){if(t.value<=2){var n=t.body.GetWorldCenter();return l.emit(v(n.x),v(n.y),3),a.remove(t)}a.splitBox(t)}},y=function(e){i.trigger("box:join",e),a.joinBoxes.apply(null,e)},x=function(e){if(e.value){var t=e.body.GetWorldCenter(),n=e.body.GetAngle(),r=v(e.width),i=v(e.height);p.save(),p.beginPath(),p.translate(v(t.x),v(t.y)),p.rotate(n),p.fillStyle=h[e.value].color,p.fillRect(-r,-i,2*r,2*i),p.fillStyle=h[e.value].fontColor,p.fillText(e.value<10?" "+e.value:e.value,-10,10),p.stroke(),p.restore()}},w=function(){e.forEach(a.boxes,x)},_=function(){return e.keys(a.boxes).length<=4};return f.init=function(){a.createWalls();var e=m(window.innerWidth),t=m(window.innerHeight),n=a.create(e/2,t/2,e/3,t/3);n.value=2048},f.step=function(){g(),u.contacts.forEach(y),u.reset(),p.clearRect(0,0,d.width,d.height),p.globalCompositeOperation="lighter",l.loop(),p.globalCompositeOperation="source-over",w(),_()&&(f.stop(),c.show(s.max))},f.start=function(){f.interval||(f.interval=setInterval(f.step,1e3/60))},f.controlsActivate=function(){i.on("tap:body",b),o.activate()},f.stop=function(){f.interval&&(clearInterval(f.interval),i.off("tap:body"),o.deactivate())},f}),require.config({paths:{lodash:"/lodash"}}),require(["config","events","game","score"],function(e,t,n,r){n.init(),n.step();var i=function(t){t.preventDefault(),e.canvas.removeEventListener("mouseup",i),n.start()};e.canvas.addEventListener("mouseup",i),n.controlsActivate(),console.log("KKKKKKKKKKKK"),r.draw(),t.on("box:split",function(){r.more(2),r.draw()}),t.on("box:join",function(){r.less(2),r.draw()})}),define("main",function(){});