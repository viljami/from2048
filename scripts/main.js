/** vim: et:ts=4:sw=4:sts=4
 * @license RequireJS 2.1.11 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/requirejs for details
 */

/**
 * @license
 * Lo-Dash 2.4.1 <http://lodash.com/>
 * Copyright 2012-2013 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.5.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2013 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <http://lodash.com/license>
 */

var requirejs,require,define;!function(global){function isFunction(e){return"[object Function]"===ostring.call(e)}function isArray(e){return"[object Array]"===ostring.call(e)}function each(e,n){if(e){var t;for(t=0;t<e.length&&(!e[t]||!n(e[t],t,e));t+=1);}}function eachReverse(e,n){if(e){var t;for(t=e.length-1;t>-1&&(!e[t]||!n(e[t],t,e));t-=1);}}function hasProp(e,n){return hasOwn.call(e,n)}function getOwn(e,n){return hasProp(e,n)&&e[n]}function eachProp(e,n){var t;for(t in e)if(hasProp(e,t)&&n(e[t],t))break}function mixin(e,n,t,r){return n&&eachProp(n,function(n,i){(t||!hasProp(e,i))&&(!r||"object"!=typeof n||!n||isArray(n)||isFunction(n)||n instanceof RegExp?e[i]=n:(e[i]||(e[i]={}),mixin(e[i],n,t,r)))}),e}function bind(e,n){return function(){return n.apply(e,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(e){throw e}function getGlobal(e){if(!e)return e;var n=global;return each(e.split("."),function(e){n=n[e]}),n}function makeError(e,n,t,r){var i=new Error(n+"\nhttp://requirejs.org/docs/errors.html#"+e);return i.requireType=e,i.requireModules=r,t&&(i.originalError=t),i}function newContext(e){function n(e){var n,t,r=e.length;for(n=0;r>n;n++)if(t=e[n],"."===t)e.splice(n,1),n-=1;else if(".."===t){if(1===n&&(".."===e[2]||".."===e[0]))break;n>0&&(e.splice(n-1,2),n-=2)}}function t(e,t,r){var i,o,a,u,c,l,s,f,p,d,h,g=t&&t.split("/"),m=g,v=E.map,b=v&&v["*"];if(e&&"."===e.charAt(0)&&(t?(m=g.slice(0,g.length-1),e=e.split("/"),s=e.length-1,E.nodeIdCompat&&jsSuffixRegExp.test(e[s])&&(e[s]=e[s].replace(jsSuffixRegExp,"")),e=m.concat(e),n(e),e=e.join("/")):0===e.indexOf("./")&&(e=e.substring(2))),r&&v&&(g||b)){a=e.split("/");e:for(u=a.length;u>0;u-=1){if(l=a.slice(0,u).join("/"),g)for(c=g.length;c>0;c-=1)if(o=getOwn(v,g.slice(0,c).join("/")),o&&(o=getOwn(o,l))){f=o,p=u;break e}!d&&b&&getOwn(b,l)&&(d=getOwn(b,l),h=u)}!f&&d&&(f=d,p=h),f&&(a.splice(0,p,f),e=a.join("/"))}return i=getOwn(E.pkgs,e),i?i:e}function r(e){isBrowser&&each(scripts(),function(n){return n.getAttribute("data-requiremodule")===e&&n.getAttribute("data-requirecontext")===x.contextName?(n.parentNode.removeChild(n),!0):void 0})}function i(e){var n=getOwn(E.paths,e);return n&&isArray(n)&&n.length>1?(n.shift(),x.require.undef(e),x.require([e]),!0):void 0}function o(e){var n,t=e?e.indexOf("!"):-1;return t>-1&&(n=e.substring(0,t),e=e.substring(t+1,e.length)),[n,e]}function a(e,n,r,i){var a,u,c,l,s=null,f=n?n.name:null,p=e,d=!0,h="";return e||(d=!1,e="_@r"+(O+=1)),l=o(e),s=l[0],e=l[1],s&&(s=t(s,f,i),u=getOwn(q,s)),e&&(s?h=u&&u.normalize?u.normalize(e,function(e){return t(e,f,i)}):t(e,f,i):(h=t(e,f,i),l=o(h),s=l[0],h=l[1],r=!0,a=x.nameToUrl(h))),c=!s||u||r?"":"_unnormalized"+(B+=1),{prefix:s,name:h,parentMap:n,unnormalized:!!c,url:a,originalName:p,isDefine:d,id:(s?s+"!"+h:h)+c}}function u(e){var n=e.id,t=getOwn(C,n);return t||(t=C[n]=new x.Module(e)),t}function c(e,n,t){var r=e.id,i=getOwn(C,r);!hasProp(q,r)||i&&!i.defineEmitComplete?(i=u(e),i.error&&"error"===n?t(i.error):i.on(n,t)):"defined"===n&&t(q[r])}function l(e,n){var t=e.requireModules,r=!1;n?n(e):(each(t,function(n){var t=getOwn(C,n);t&&(t.error=e,t.events.error&&(r=!0,t.emit("error",e)))}),r||req.onError(e))}function s(){globalDefQueue.length&&(apsp.apply(j,[j.length,0].concat(globalDefQueue)),globalDefQueue=[])}function f(e){delete C[e],delete k[e]}function p(e,n,t){var r=e.map.id;e.error?e.emit("error",e.error):(n[r]=!0,each(e.depMaps,function(r,i){var o=r.id,a=getOwn(C,o);!a||e.depMatched[i]||t[o]||(getOwn(n,o)?(e.defineDep(i,q[o]),e.check()):p(a,n,t))}),t[r]=!0)}function d(){var e,n,t=1e3*E.waitSeconds,o=t&&x.startTime+t<(new Date).getTime(),a=[],u=[],c=!1,s=!0;if(!b){if(b=!0,eachProp(k,function(e){var t=e.map,l=t.id;if(e.enabled&&(t.isDefine||u.push(e),!e.error))if(!e.inited&&o)i(l)?(n=!0,c=!0):(a.push(l),r(l));else if(!e.inited&&e.fetched&&t.isDefine&&(c=!0,!t.prefix))return s=!1}),o&&a.length)return e=makeError("timeout","Load timeout for modules: "+a,null,a),e.contextName=x.contextName,l(e);s&&each(u,function(e){p(e,{},{})}),o&&!n||!c||!isBrowser&&!isWebWorker||_||(_=setTimeout(function(){_=0,d()},50)),b=!1}}function h(e){hasProp(q,e[0])||u(a(e[0],null,!0)).init(e[1],e[2])}function g(e,n,t,r){e.detachEvent&&!isOpera?r&&e.detachEvent(r,n):e.removeEventListener(t,n,!1)}function m(e){var n=e.currentTarget||e.srcElement;return g(n,x.onScriptLoad,"load","onreadystatechange"),g(n,x.onScriptError,"error"),{node:n,id:n&&n.getAttribute("data-requiremodule")}}function v(){var e;for(s();j.length;){if(e=j.shift(),null===e[0])return l(makeError("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));h(e)}}var b,y,x,w,_,E={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},C={},k={},S={},j=[],q={},P={},D={},O=1,B=1;return w={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){return e.usingExports=!0,e.map.isDefine?e.exports?q[e.map.id]=e.exports:e.exports=q[e.map.id]={}:void 0},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return getOwn(E.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},y=function(e){this.events=getOwn(S,e.id)||{},this.map=e,this.shim=getOwn(E.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},y.prototype={init:function(e,n,t,r){r=r||{},this.inited||(this.factory=n,t?this.on("error",t):this.events.error&&(t=bind(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=t,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,n){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=n)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;return this.shim?void x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return e.prefix?this.callPlugin():this.load()})):e.prefix?this.callPlugin():this.load()}},load:function(){var e=this.map.url;P[e]||(P[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,n,t=this.map.id,r=this.depExports,i=this.exports,o=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(o)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{i=x.execCb(t,o,r,i)}catch(a){e=a}else i=x.execCb(t,o,r,i);if(this.map.isDefine&&void 0===i&&(n=this.module,n?i=n.exports:this.usingExports&&(i=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else i=o;this.exports=i,this.map.isDefine&&!this.ignore&&(q[t]=i,req.onResourceLoad&&req.onResourceLoad(x,this.map,this.depMaps)),f(t),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,r=a(e.prefix);this.depMaps.push(r),c(r,"defined",bind(this,function(r){var i,o,s,p=getOwn(D,this.map.id),d=this.map.name,h=this.map.parentMap?this.map.parentMap.name:null,g=x.makeRequire(e.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(r.normalize&&(d=r.normalize(d,function(e){return t(e,h,!0)})||""),o=a(e.prefix+"!"+d,this.map.parentMap),c(o,"defined",bind(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),s=getOwn(C,o.id),void(s&&(this.depMaps.push(o),this.events.error&&s.on("error",bind(this,function(e){this.emit("error",e)})),s.enable()))):p?(this.map.url=x.nameToUrl(p),void this.load()):(i=bind(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),i.error=bind(this,function(e){this.inited=!0,this.error=e,e.requireModules=[n],eachProp(C,function(e){0===e.map.id.indexOf(n+"_unnormalized")&&f(e.map.id)}),l(e)}),i.fromText=bind(this,function(t,r){var o=e.name,c=a(o),s=useInteractive;r&&(t=r),s&&(useInteractive=!1),u(c),hasProp(E.config,n)&&(E.config[o]=E.config[n]);try{req.exec(t)}catch(f){return l(makeError("fromtexteval","fromText eval for "+n+" failed: "+f,f,[n]))}s&&(useInteractive=!0),this.depMaps.push(c),x.completeLoad(o),g([o],i)}),void r.load(e.name,g,i,E))})),x.enable(r,this),this.pluginMaps[r.id]=r},enable:function(){k[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(e,n){var t,r,i;if("string"==typeof e){if(e=a(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e,i=getOwn(w,e.id))return void(this.depExports[n]=i(this));this.depCount+=1,c(e,"defined",bind(this,function(e){this.defineDep(n,e),this.check()})),this.errback&&c(e,"error",bind(this,this.errback))}t=e.id,r=C[t],hasProp(w,t)||!r||r.enabled||x.enable(e,this)})),eachProp(this.pluginMaps,bind(this,function(e){var n=getOwn(C,e.id);n&&!n.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,n){var t=this.events[e];t||(t=this.events[e]=[]),t.push(n)},emit:function(e,n){each(this.events[e],function(e){e(n)}),"error"===e&&delete this.events[e]}},x={config:E,contextName:e,registry:C,defined:q,urlFetched:P,defQueue:j,Module:y,makeModuleMap:a,nextTick:req.nextTick,onError:l,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var n=E.shim,t={paths:!0,bundles:!0,config:!0,map:!0};eachProp(e,function(e,n){t[n]?(E[n]||(E[n]={}),mixin(E[n],e,!0,!0)):E[n]=e}),e.bundles&&eachProp(e.bundles,function(e,n){each(e,function(e){e!==n&&(D[e]=n)})}),e.shim&&(eachProp(e.shim,function(e,t){isArray(e)&&(e={deps:e}),!e.exports&&!e.init||e.exportsFn||(e.exportsFn=x.makeShimExports(e)),n[t]=e}),E.shim=n),e.packages&&each(e.packages,function(e){var n,t;e="string"==typeof e?{name:e}:e,t=e.name,n=e.location,n&&(E.paths[t]=e.location),E.pkgs[t]=e.name+"/"+(e.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(C,function(e,n){e.inited||e.map.unnormalized||(e.map=a(n))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){function n(){var n;return e.init&&(n=e.init.apply(global,arguments)),n||e.exports&&getGlobal(e.exports)}return n},makeRequire:function(n,i){function o(t,r,c){var s,f,p;return i.enableBuildCallback&&r&&isFunction(r)&&(r.__requireJsBuild=!0),"string"==typeof t?isFunction(r)?l(makeError("requireargs","Invalid require call"),c):n&&hasProp(w,t)?w[t](C[n.id]):req.get?req.get(x,t,n,o):(f=a(t,n,!1,!0),s=f.id,hasProp(q,s)?q[s]:l(makeError("notloaded",'Module name "'+s+'" has not been loaded yet for context: '+e+(n?"":". Use require([])")))):(v(),x.nextTick(function(){v(),p=u(a(null,n)),p.skipMap=i.skipMap,p.init(t,r,c,{enabled:!0}),d()}),o)}return i=i||{},mixin(o,{isBrowser:isBrowser,toUrl:function(e){var r,i=e.lastIndexOf("."),o=e.split("/")[0],a="."===o||".."===o;return-1!==i&&(!a||i>1)&&(r=e.substring(i,e.length),e=e.substring(0,i)),x.nameToUrl(t(e,n&&n.id,!0),r,!0)},defined:function(e){return hasProp(q,a(e,n,!1,!0).id)},specified:function(e){return e=a(e,n,!1,!0).id,hasProp(q,e)||hasProp(C,e)}}),n||(o.undef=function(e){s();var t=a(e,n,!0),i=getOwn(C,e);r(e),delete q[e],delete P[t.url],delete S[e],eachReverse(j,function(n,t){n[0]===e&&j.splice(t,1)}),i&&(i.events.defined&&(S[e]=i.events),f(e))}),o},enable:function(e){var n=getOwn(C,e.id);n&&u(e).enable()},completeLoad:function(e){var n,t,r,o=getOwn(E.shim,e)||{},a=o.exports;for(s();j.length;){if(t=j.shift(),null===t[0]){if(t[0]=e,n)break;n=!0}else t[0]===e&&(n=!0);h(t)}if(r=getOwn(C,e),!n&&!hasProp(q,e)&&r&&!r.inited){if(!(!E.enforceDefine||a&&getGlobal(a)))return i(e)?void 0:l(makeError("nodefine","No define call for "+e,null,[e]));h([e,o.deps||[],o.exportsFn])}d()},nameToUrl:function(e,n,t){var r,i,o,a,u,c,l,s=getOwn(E.pkgs,e);if(s&&(e=s),l=getOwn(D,e))return x.nameToUrl(l,n,t);if(req.jsExtRegExp.test(e))u=e+(n||"");else{for(r=E.paths,i=e.split("/"),o=i.length;o>0;o-=1)if(a=i.slice(0,o).join("/"),c=getOwn(r,a)){isArray(c)&&(c=c[0]),i.splice(0,o,c);break}u=i.join("/"),u+=n||(/^data\:|\?/.test(u)||t?"":".js"),u=("/"===u.charAt(0)||u.match(/^[\w\+\.\-]+:/)?"":E.baseUrl)+u}return E.urlArgs?u+((-1===u.indexOf("?")?"?":"&")+E.urlArgs):u},load:function(e,n){req.load(x,e,n)},execCb:function(e,n,t,r){return n.apply(r,t)},onScriptLoad:function(e){if("load"===e.type||readyRegExp.test((e.currentTarget||e.srcElement).readyState)){interactiveScript=null;var n=m(e);x.completeLoad(n.id)}},onScriptError:function(e){var n=m(e);return i(n.id)?void 0:l(makeError("scripterror","Script error for: "+n.id,e,[n.id]))}},x.require=x.makeRequire(),x}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(e){return"interactive"===e.readyState?interactiveScript=e:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.11",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(e,n,t,r){var i,o,a=defContextName;return isArray(e)||"string"==typeof e||(o=e,isArray(n)?(e=n,n=t,t=r):e=[]),o&&o.context&&(a=o.context),i=getOwn(contexts,a),i||(i=contexts[a]=req.s.newContext(a)),o&&i.configure(o),i.require(e,n,t)},req.config=function(e){return req(e)},req.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(e){req[e]=function(){var n=contexts[defContextName];return n.require[e].apply(n,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(e){var n=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return n.type=e.scriptType||"text/javascript",n.charset="utf-8",n.async=!0,n},req.load=function(e,n,t){var r,i=e&&e.config||{};if(isBrowser)return r=req.createNode(i,n,t),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",n),!r.attachEvent||r.attachEvent.toString&&r.attachEvent.toString().indexOf("[native code")<0||isOpera?(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)):(useInteractive=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)),r.src=t,currentlyAddingScript=r,baseElement?head.insertBefore(r,baseElement):head.appendChild(r),currentlyAddingScript=null,r;if(isWebWorker)try{importScripts(t),e.completeLoad(n)}catch(o){e.onError(makeError("importscripts","importScripts failed for "+n+" at "+t,o,[n]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(e){return head||(head=e.parentNode),dataMain=e.getAttribute("data-main"),dataMain?(mainScript=dataMain,cfg.baseUrl||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0):void 0}),define=function(e,n,t){var r,i;"string"!=typeof e&&(t=n,n=e,e=null),isArray(n)||(t=n,n=null),!n&&isFunction(t)&&(n=[],t.length&&(t.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(e,t){n.push(t)}),n=(1===t.length?["require"]:["require","exports","module"]).concat(n))),useInteractive&&(r=currentlyAddingScript||getInteractiveScript(),r&&(e||(e=r.getAttribute("data-requiremodule")),i=contexts[r.getAttribute("data-requirecontext")])),(i?i.defQueue:globalDefQueue).push([e,n,t])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),define("requireLib",function(){}),function(){function e(e,n,t){for(var r=(t||0)-1,i=e?e.length:0;++r<i;)if(e[r]===n)return r;return-1}function n(n,t){var r=typeof t;if(n=n.cache,"boolean"==r||null==t)return n[t]?0:-1;"number"!=r&&"string"!=r&&(r="object");var i="number"==r?t:y+t;return n=(n=n[r])&&n[i],"object"==r?n&&e(n,t)>-1?0:-1:n?0:-1}function t(e){var n=this.cache,t=typeof e;if("boolean"==t||null==e)n[e]=!0;else{"number"!=t&&"string"!=t&&(t="object");var r="number"==t?e:y+e,i=n[t]||(n[t]={});"object"==t?(i[r]||(i[r]=[])).push(e):i[r]=!0}}function r(e){return e.charCodeAt(0)}function i(e,n){for(var t=e.criteria,r=n.criteria,i=-1,o=t.length;++i<o;){var a=t[i],u=r[i];if(a!==u){if(a>u||"undefined"==typeof a)return 1;if(u>a||"undefined"==typeof u)return-1}}return e.index-n.index}function o(e){var n=-1,r=e.length,i=e[0],o=e[r/2|0],a=e[r-1];if(i&&"object"==typeof i&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;var u=c();u["false"]=u["null"]=u["true"]=u.undefined=!1;var l=c();for(l.array=e,l.cache=u,l.push=t;++n<r;)l.push(e[n]);return l}function a(e){return"\\"+X[e]}function u(){return g.pop()||[]}function c(){return m.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function l(e){return"function"!=typeof e.toString&&"string"==typeof(e+"")}function s(e){e.length=0,g.length<w&&g.push(e)}function f(e){var n=e.cache;n&&f(n),e.array=e.cache=e.criteria=e.object=e.number=e.string=e.value=null,m.length<w&&m.push(e)}function p(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,i=t-n||0,o=Array(0>i?0:i);++r<i;)o[r]=e[n+r];return o}function d(t){function g(e){return e&&"object"==typeof e&&!si(e)&&Ur.call(e,"__wrapped__")?e:new m(e)}function m(e,n){this.__chain__=!!n,this.__wrapped__=e}function w(e){function n(){if(r){var e=p(r);Gr.apply(e,arguments)}if(this instanceof n){var o=en(t.prototype),a=t.apply(o,e||arguments);return Nn(a)?a:o}return t.apply(i,e||arguments)}var t=e[0],r=e[2],i=e[4];return li(n,e),n}function X(e,n,t,r,i){if(t){var o=t(e);if("undefined"!=typeof o)return o}var a=Nn(e);if(!a)return e;var c=Rr.call(e);if(!Q[c]||!ui.nodeClass&&l(e))return e;var f=oi[c];switch(c){case L:case F:return new f(+e);case U:case H:return new f(e);case $:return o=f(e.source,j.exec(e)),o.lastIndex=e.lastIndex,o}var d=si(e);if(n){var h=!r;r||(r=u()),i||(i=u());for(var g=r.length;g--;)if(r[g]==e)return i[g];o=d?f(e.length):{}}else o=d?p(e):wi({},e);return d&&(Ur.call(e,"index")&&(o.index=e.index),Ur.call(e,"input")&&(o.input=e.input)),n?(r.push(e),i.push(o),(d?xi:Ci)(e,function(e,a){o[a]=X(e,n,t,r,i)}),h&&(s(r),s(i)),o):o}function en(e){return Nn(e)?Yr(e):{}}function nn(e,n,t){if("function"!=typeof e)return ir;if("undefined"==typeof n||!("prototype"in e))return e;var r=e.__bindData__;if("undefined"==typeof r&&(ui.funcNames&&(r=!e.name),r=r||!ui.funcDecomp,!r)){var i=zr.call(e);ui.funcNames||(r=!q.test(i)),r||(r=B.test(i),li(e,r))}if(r===!1||r!==!0&&1&r[1])return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,i){return e.call(n,t,r,i)};case 4:return function(t,r,i,o){return e.call(n,t,r,i,o)}}return zt(e,n)}function tn(e){function n(){var e=c?a:this;if(i){var h=p(i);Gr.apply(h,arguments)}if((o||s)&&(h||(h=p(arguments)),o&&Gr.apply(h,o),s&&h.length<u))return r|=16,tn([t,f?r:-4&r,h,null,a,u]);if(h||(h=arguments),l&&(t=e[d]),this instanceof n){e=en(t.prototype);var g=t.apply(e,h);return Nn(g)?g:e}return t.apply(e,h)}var t=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],c=1&r,l=2&r,s=4&r,f=8&r,d=t;return li(n,e),n}function rn(t,r){var i=-1,a=gn(),u=t?t.length:0,c=u>=x&&a===e,l=[];if(c){var s=o(r);s?(a=n,r=s):c=!1}for(;++i<u;){var p=t[i];a(r,p)<0&&l.push(p)}return c&&f(r),l}function an(e,n,t,r){for(var i=(r||0)-1,o=e?e.length:0,a=[];++i<o;){var u=e[i];if(u&&"object"==typeof u&&"number"==typeof u.length&&(si(u)||yn(u))){n||(u=an(u,n,t));var c=-1,l=u.length,s=a.length;for(a.length+=l;++c<l;)a[s++]=u[c]}else t||a.push(u)}return a}function un(e,n,t,r,i,o){if(t){var a=t(e,n);if("undefined"!=typeof a)return!!a}if(e===n)return 0!==e||1/e==1/n;var c=typeof e,f=typeof n;if(!(e!==e||e&&J[c]||n&&J[f]))return!1;if(null==e||null==n)return e===n;var p=Rr.call(e),d=Rr.call(n);if(p==N&&(p=G),d==N&&(d=G),p!=d)return!1;switch(p){case L:case F:return+e==+n;case U:return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case $:case H:return e==Pr(n)}var h=p==I;if(!h){var g=Ur.call(e,"__wrapped__"),m=Ur.call(n,"__wrapped__");if(g||m)return un(g?e.__wrapped__:e,m?n.__wrapped__:n,t,r,i,o);if(p!=G||!ui.nodeClass&&(l(e)||l(n)))return!1;var v=!ui.argsObject&&yn(e)?jr:e.constructor,b=!ui.argsObject&&yn(n)?jr:n.constructor;if(v!=b&&!(Rn(v)&&v instanceof v&&Rn(b)&&b instanceof b)&&"constructor"in e&&"constructor"in n)return!1}var y=!i;i||(i=u()),o||(o=u());for(var x=i.length;x--;)if(i[x]==e)return o[x]==n;var w=0;if(a=!0,i.push(e),o.push(n),h){if(x=e.length,w=n.length,a=w==x,a||r)for(;w--;){var _=x,E=n[w];if(r)for(;_--&&!(a=un(e[_],E,t,r,i,o)););else if(!(a=un(e[w],E,t,r,i,o)))break}}else Ei(n,function(n,u,c){return Ur.call(c,u)?(w++,a=Ur.call(e,u)&&un(e[u],n,t,r,i,o)):void 0}),a&&!r&&Ei(e,function(e,n,t){return Ur.call(t,n)?a=--w>-1:void 0});return i.pop(),o.pop(),y&&(s(i),s(o)),a}function cn(e,n,t,r,i){(si(n)?rt:Ci)(n,function(n,o){var a,u,c=n,l=e[o];if(n&&((u=si(n))||ki(n))){for(var s=r.length;s--;)if(a=r[s]==n){l=i[s];break}if(!a){var f;t&&(c=t(l,n),(f="undefined"!=typeof c)&&(l=c)),f||(l=u?si(l)?l:[]:ki(l)?l:{}),r.push(n),i.push(l),f||cn(l,n,t,r,i)}}else t&&(c=t(l,n),"undefined"==typeof c&&(c=n)),"undefined"!=typeof c&&(l=c);e[o]=l})}function ln(e,n){return e+Fr(ii()*(n-e+1))}function sn(t,r,i){var a=-1,c=gn(),l=t?t.length:0,p=[],d=!r&&l>=x&&c===e,h=i||d?u():p;if(d){var g=o(h);c=n,h=g}for(;++a<l;){var m=t[a],v=i?i(m,a,t):m;(r?!a||h[h.length-1]!==v:c(h,v)<0)&&((i||d)&&h.push(v),p.push(m))}return d?(s(h.array),f(h)):i&&s(h),p}function fn(e){return function(n,t,r){var i={};if(t=g.createCallback(t,r,3),si(n))for(var o=-1,a=n.length;++o<a;){var u=n[o];e(i,u,t(u,o,n),n)}else xi(n,function(n,r,o){e(i,n,t(n,r,o),o)});return i}}function pn(e,n,t,r,i,o){var a=1&n,u=2&n,c=4&n,l=16&n,s=32&n;if(!u&&!Rn(e))throw new Dr;l&&!t.length&&(n&=-17,l=t=!1),s&&!r.length&&(n&=-33,s=r=!1);var f=e&&e.__bindData__;if(f&&f!==!0)return f=p(f),f[2]&&(f[2]=p(f[2])),f[3]&&(f[3]=p(f[3])),!a||1&f[1]||(f[4]=i),!a&&1&f[1]&&(n|=8),!c||4&f[1]||(f[5]=o),l&&Gr.apply(f[2]||(f[2]=[]),t),s&&Vr.apply(f[3]||(f[3]=[]),r),f[1]|=n,pn.apply(null,f);var d=1==n||17===n?w:tn;return d([e,n,t,r,i,o])}function dn(){Y.shadowedProps=T,Y.support=ui,Y.array=Y.bottom=Y.loop=Y.top="",Y.init="iterable",Y.useHas=!0;for(var e,n=0;e=arguments[n];n++)for(var t in e)Y[t]=e[t];var r=Y.args;Y.firstArg=/^[^,]+/.exec(r)[0];var i=Cr("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+ci(Y)+"\n}");return i(nn,z,Br,Ur,b,yn,si,Wn,Y.keys,Ar,J,ai,H,Mr,Rr)}function hn(e){return mi[e]}function gn(){var n=(n=g.indexOf)===Ct?e:n;return n}function mn(e){return"function"==typeof e&&Nr.test(e)}function vn(e){var n,t;return!e||Rr.call(e)!=G||(n=e.constructor,Rn(n)&&!(n instanceof n))||!ui.argsClass&&yn(e)||!ui.nodeClass&&l(e)?!1:ui.ownLast?(Ei(e,function(e,n,r){return t=Ur.call(r,n),!1}),t!==!1):(Ei(e,function(e,n){t=n}),"undefined"==typeof t||Ur.call(e,t))}function bn(e){return vi[e]}function yn(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Rr.call(e)==N||!1}function xn(e,n,t,r){return"boolean"!=typeof n&&null!=n&&(r=t,t=n,n=!1),X(e,n,"function"==typeof t&&nn(t,r,1))}function wn(e,n,t){return X(e,!0,"function"==typeof n&&nn(n,t,1))}function _n(e,n){var t=en(e);return n?wi(t,n):t}function En(e,n,t){var r;return n=g.createCallback(n,t,3),Ci(e,function(e,t,i){return n(e,t,i)?(r=t,!1):void 0}),r}function Cn(e,n,t){var r;return n=g.createCallback(n,t,3),Sn(e,function(e,t,i){return n(e,t,i)?(r=t,!1):void 0}),r}function kn(e,n,t){var r=[];Ei(e,function(e,n){r.push(n,e)});var i=r.length;for(n=nn(n,t,3);i--&&n(r[i--],r[i],e)!==!1;);return e}function Sn(e,n,t){var r=pi(e),i=r.length;for(n=nn(n,t,3);i--;){var o=r[i];if(n(e[o],o,e)===!1)break}return e}function jn(e){var n=[];return Ei(e,function(e,t){Rn(e)&&n.push(t)}),n.sort()}function qn(e,n){return e?Ur.call(e,n):!1}function Pn(e){for(var n=-1,t=pi(e),r=t.length,i={};++n<r;){var o=t[n];i[e[o]]=o}return i}function Dn(e){return e===!0||e===!1||e&&"object"==typeof e&&Rr.call(e)==L||!1}function On(e){return e&&"object"==typeof e&&Rr.call(e)==F||!1}function Bn(e){return e&&1===e.nodeType||!1}function An(e){var n=!0;if(!e)return n;var t=Rr.call(e),r=e.length;return t==I||t==H||(ui.argsClass?t==N:yn(e))||t==G&&"number"==typeof r&&Rn(e.splice)?!r:(Ci(e,function(){return n=!1}),n)}function Mn(e,n,t,r){return un(e,n,"function"==typeof t&&nn(t,r,2))}function Tn(e){return Xr(e)&&!Zr(parseFloat(e))}function Rn(e){return"function"==typeof e}function Nn(e){return!(!e||!J[typeof e])}function In(e){return Fn(e)&&e!=+e}function Ln(e){return null===e}function Fn(e){return"number"==typeof e||e&&"object"==typeof e&&Rr.call(e)==U||!1}function zn(e){return e&&J[typeof e]&&Rr.call(e)==$||!1}function Wn(e){return"string"==typeof e||e&&"object"==typeof e&&Rr.call(e)==H||!1}function Un(e){return"undefined"==typeof e}function Gn(e,n,t){var r={};return n=g.createCallback(n,t,3),Ci(e,function(e,t,i){r[t]=n(e,t,i)}),r}function $n(e){var n=arguments,t=2;if(!Nn(e))return e;if("number"!=typeof n[2]&&(t=n.length),t>3&&"function"==typeof n[t-2])var r=nn(n[--t-1],n[t--],2);else t>2&&"function"==typeof n[t-1]&&(r=n[--t]);for(var i=p(arguments,1,t),o=-1,a=u(),c=u();++o<t;)cn(e,i[o],r,a,c);return s(a),s(c),e}function Hn(e,n,t){var r={};if("function"!=typeof n){var i=[];Ei(e,function(e,n){i.push(n)}),i=rn(i,an(arguments,!0,!1,1));for(var o=-1,a=i.length;++o<a;){var u=i[o];r[u]=e[u]}}else n=g.createCallback(n,t,3),Ei(e,function(e,t,i){n(e,t,i)||(r[t]=e)});return r}function Qn(e){for(var n=-1,t=pi(e),r=t.length,i=xr(r);++n<r;){var o=t[n];i[n]=[o,e[o]]}return i}function Vn(e,n,t){var r={};if("function"!=typeof n)for(var i=-1,o=an(arguments,!0,!1,1),a=Nn(e)?o.length:0;++i<a;){var u=o[i];u in e&&(r[u]=e[u])}else n=g.createCallback(n,t,3),Ei(e,function(e,t,i){n(e,t,i)&&(r[t]=e)});return r}function Kn(e,n,t,r){var i=si(e);if(null==t)if(i)t=[];else{var o=e&&e.constructor,a=o&&o.prototype;t=en(a)}return n&&(n=g.createCallback(n,r,4),(i?xi:Ci)(e,function(e,r,i){return n(t,e,r,i)})),t}function Yn(e){for(var n=-1,t=pi(e),r=t.length,i=xr(r);++n<r;)i[n]=e[t[n]];return i}function Jn(e){var n=arguments,t=-1,r=an(n,!0,!1,1),i=n[2]&&n[2][n[1]]===e?1:r.length,o=xr(i);for(ui.unindexedChars&&Wn(e)&&(e=e.split(""));++t<i;)o[t]=e[r[t]];return o}function Xn(e,n,t){var r=-1,i=gn(),o=e?e.length:0,a=!1;return t=(0>t?ni(0,o+t):t)||0,si(e)?a=i(e,n,t)>-1:"number"==typeof o?a=(Wn(e)?e.indexOf(n,t):i(e,n,t))>-1:xi(e,function(e){return++r>=t?!(a=e===n):void 0}),a}function Zn(e,n,t){var r=!0;if(n=g.createCallback(n,t,3),si(e))for(var i=-1,o=e.length;++i<o&&(r=!!n(e[i],i,e)););else xi(e,function(e,t,i){return r=!!n(e,t,i)});return r}function et(e,n,t){var r=[];if(n=g.createCallback(n,t,3),si(e))for(var i=-1,o=e.length;++i<o;){var a=e[i];n(a,i,e)&&r.push(a)}else xi(e,function(e,t,i){n(e,t,i)&&r.push(e)});return r}function nt(e,n,t){if(n=g.createCallback(n,t,3),!si(e)){var r;return xi(e,function(e,t,i){return n(e,t,i)?(r=e,!1):void 0}),r}for(var i=-1,o=e.length;++i<o;){var a=e[i];if(n(a,i,e))return a}}function tt(e,n,t){var r;return n=g.createCallback(n,t,3),it(e,function(e,t,i){return n(e,t,i)?(r=e,!1):void 0}),r}function rt(e,n,t){if(n&&"undefined"==typeof t&&si(e))for(var r=-1,i=e.length;++r<i&&n(e[r],r,e)!==!1;);else xi(e,n,t);return e}function it(e,n,t){var r=e,i=e?e.length:0;if(n=n&&"undefined"==typeof t?n:nn(n,t,3),si(e))for(;i--&&n(e[i],i,e)!==!1;);else{if("number"!=typeof i){var o=pi(e);i=o.length}else ui.unindexedChars&&Wn(e)&&(r=e.split(""));xi(e,function(e,t,a){return t=o?o[--i]:--i,n(r[t],t,a)})}return e}function ot(e,n){var t=p(arguments,2),r=-1,i="function"==typeof n,o=e?e.length:0,a=xr("number"==typeof o?o:0);return rt(e,function(e){a[++r]=(i?n:e[n]).apply(e,t)}),a}function at(e,n,t){var r=-1,i=e?e.length:0,o=xr("number"==typeof i?i:0);if(n=g.createCallback(n,t,3),si(e))for(;++r<i;)o[r]=n(e[r],r,e);else xi(e,function(e,t,i){o[++r]=n(e,t,i)});return o}function ut(e,n,t){var i=-1/0,o=i;if("function"!=typeof n&&t&&t[n]===e&&(n=null),null==n&&si(e))for(var a=-1,u=e.length;++a<u;){var c=e[a];c>o&&(o=c)}else n=null==n&&Wn(e)?r:g.createCallback(n,t,3),xi(e,function(e,t,r){var a=n(e,t,r);a>i&&(i=a,o=e)});return o}function ct(e,n,t){var i=1/0,o=i;if("function"!=typeof n&&t&&t[n]===e&&(n=null),null==n&&si(e))for(var a=-1,u=e.length;++a<u;){var c=e[a];o>c&&(o=c)}else n=null==n&&Wn(e)?r:g.createCallback(n,t,3),xi(e,function(e,t,r){var a=n(e,t,r);i>a&&(i=a,o=e)});return o}function lt(e,n,t,r){var i=arguments.length<3;if(n=g.createCallback(n,r,4),si(e)){var o=-1,a=e.length;for(i&&(t=e[++o]);++o<a;)t=n(t,e[o],o,e)}else xi(e,function(e,r,o){t=i?(i=!1,e):n(t,e,r,o)});return t}function st(e,n,t,r){var i=arguments.length<3;return n=g.createCallback(n,r,4),it(e,function(e,r,o){t=i?(i=!1,e):n(t,e,r,o)}),t}function ft(e,n,t){return n=g.createCallback(n,t,3),et(e,function(e,t,r){return!n(e,t,r)})}function pt(e,n,t){if(e&&"number"!=typeof e.length?e=Yn(e):ui.unindexedChars&&Wn(e)&&(e=e.split("")),null==n||t)return e?e[ln(0,e.length-1)]:h;var r=dt(e);return r.length=ti(ni(0,n),r.length),r}function dt(e){var n=-1,t=e?e.length:0,r=xr("number"==typeof t?t:0);return rt(e,function(e){var t=ln(0,++n);r[n]=r[t],r[t]=e}),r}function ht(e){var n=e?e.length:0;return"number"==typeof n?n:pi(e).length}function gt(e,n,t){var r;if(n=g.createCallback(n,t,3),si(e))for(var i=-1,o=e.length;++i<o&&!(r=n(e[i],i,e)););else xi(e,function(e,t,i){return!(r=n(e,t,i))});return!!r}function mt(e,n,t){var r=-1,o=si(n),a=e?e.length:0,l=xr("number"==typeof a?a:0);for(o||(n=g.createCallback(n,t,3)),rt(e,function(e,t,i){var a=l[++r]=c();o?a.criteria=at(n,function(n){return e[n]}):(a.criteria=u())[0]=n(e,t,i),a.index=r,a.value=e}),a=l.length,l.sort(i);a--;){var p=l[a];l[a]=p.value,o||s(p.criteria),f(p)}return l}function vt(e){return e&&"number"==typeof e.length?ui.unindexedChars&&Wn(e)?e.split(""):p(e):Yn(e)}function bt(e){for(var n=-1,t=e?e.length:0,r=[];++n<t;){var i=e[n];i&&r.push(i)}return r}function yt(e){return rn(e,an(arguments,!0,!0,1))}function xt(e,n,t){var r=-1,i=e?e.length:0;for(n=g.createCallback(n,t,3);++r<i;)if(n(e[r],r,e))return r;return-1}function wt(e,n,t){var r=e?e.length:0;for(n=g.createCallback(n,t,3);r--;)if(n(e[r],r,e))return r;return-1}function _t(e,n,t){var r=0,i=e?e.length:0;if("number"!=typeof n&&null!=n){var o=-1;for(n=g.createCallback(n,t,3);++o<i&&n(e[o],o,e);)r++}else if(r=n,null==r||t)return e?e[0]:h;return p(e,0,ti(ni(0,r),i))}function Et(e,n,t,r){return"boolean"!=typeof n&&null!=n&&(r=t,t="function"!=typeof n&&r&&r[n]===e?null:n,n=!1),null!=t&&(e=at(e,t,r)),an(e,n)}function Ct(n,t,r){if("number"==typeof r){var i=n?n.length:0;
r=0>r?ni(0,i+r):r||0}else if(r){var o=At(n,t);return n[o]===t?o:-1}return e(n,t,r)}function kt(e,n,t){var r=0,i=e?e.length:0;if("number"!=typeof n&&null!=n){var o=i;for(n=g.createCallback(n,t,3);o--&&n(e[o],o,e);)r++}else r=null==n||t?1:n||r;return p(e,0,ti(ni(0,i-r),i))}function St(){for(var t=[],r=-1,i=arguments.length,a=u(),c=gn(),l=c===e,p=u();++r<i;){var d=arguments[r];(si(d)||yn(d))&&(t.push(d),a.push(l&&d.length>=x&&o(r?t[r]:p)))}var h=t[0],g=-1,m=h?h.length:0,v=[];e:for(;++g<m;){var b=a[0];if(d=h[g],(b?n(b,d):c(p,d))<0){for(r=i,(b||p).push(d);--r;)if(b=a[r],(b?n(b,d):c(t[r],d))<0)continue e;v.push(d)}}for(;i--;)b=a[i],b&&f(b);return s(a),s(p),v}function jt(e,n,t){var r=0,i=e?e.length:0;if("number"!=typeof n&&null!=n){var o=i;for(n=g.createCallback(n,t,3);o--&&n(e[o],o,e);)r++}else if(r=n,null==r||t)return e?e[i-1]:h;return p(e,ni(0,i-r))}function qt(e,n,t){var r=e?e.length:0;for("number"==typeof t&&(r=(0>t?ni(0,r+t):ti(t,r-1))+1);r--;)if(e[r]===n)return r;return-1}function Pt(e){for(var n=arguments,t=0,r=n.length,i=e?e.length:0;++t<r;)for(var o=-1,a=n[t];++o<i;)e[o]===a&&(Qr.call(e,o--,1),i--);return e}function Dt(e,n,t){e=+e||0,t="number"==typeof t?t:+t||1,null==n&&(n=e,e=0);for(var r=-1,i=ni(0,Ir((n-e)/(t||1))),o=xr(i);++r<i;)o[r]=e,e+=t;return o}function Ot(e,n,t){var r=-1,i=e?e.length:0,o=[];for(n=g.createCallback(n,t,3);++r<i;){var a=e[r];n(a,r,e)&&(o.push(a),Qr.call(e,r--,1),i--)}return o}function Bt(e,n,t){if("number"!=typeof n&&null!=n){var r=0,i=-1,o=e?e.length:0;for(n=g.createCallback(n,t,3);++i<o&&n(e[i],i,e);)r++}else r=null==n||t?1:ni(0,n);return p(e,r)}function At(e,n,t,r){var i=0,o=e?e.length:i;for(t=t?g.createCallback(t,r,1):ir,n=t(n);o>i;){var a=i+o>>>1;t(e[a])<n?i=a+1:o=a}return i}function Mt(){return sn(an(arguments,!0,!0))}function Tt(e,n,t,r){return"boolean"!=typeof n&&null!=n&&(r=t,t="function"!=typeof n&&r&&r[n]===e?null:n,n=!1),null!=t&&(t=g.createCallback(t,r,3)),sn(e,n,t)}function Rt(e){return rn(e,p(arguments,1))}function Nt(){for(var e=-1,n=arguments.length;++e<n;){var t=arguments[e];if(si(t)||yn(t))var r=r?sn(rn(r,t).concat(rn(t,r))):t}return r||[]}function It(){for(var e=arguments.length>1?arguments:arguments[0],n=-1,t=e?ut(Pi(e,"length")):0,r=xr(0>t?0:t);++n<t;)r[n]=Pi(e,n);return r}function Lt(e,n){var t=-1,r=e?e.length:0,i={};for(n||!r||si(e[0])||(n=[]);++t<r;){var o=e[t];n?i[o]=n[t]:o&&(i[o[0]]=o[1])}return i}function Ft(e,n){if(!Rn(n))throw new Dr;return function(){return--e<1?n.apply(this,arguments):void 0}}function zt(e,n){return arguments.length>2?pn(e,17,p(arguments,2),null,n):pn(e,1,null,null,n)}function Wt(e){for(var n=arguments.length>1?an(arguments,!0,!1,1):jn(e),t=-1,r=n.length;++t<r;){var i=n[t];e[i]=pn(e[i],1,null,null,e)}return e}function Ut(e,n){return arguments.length>2?pn(n,19,p(arguments,2),null,e):pn(n,3,null,null,e)}function Gt(){for(var e=arguments,n=e.length;n--;)if(!Rn(e[n]))throw new Dr;return function(){for(var n=arguments,t=e.length;t--;)n=[e[t].apply(this,n)];return n[0]}}function $t(e,n){return n="number"==typeof n?n:+n||e.length,pn(e,4,null,null,null,n)}function Ht(e,n,t){var r,i,o,a,u,c,l,s=0,f=!1,p=!0;if(!Rn(e))throw new Dr;if(n=ni(0,n)||0,t===!0){var d=!0;p=!1}else Nn(t)&&(d=t.leading,f="maxWait"in t&&(ni(n,t.maxWait)||0),p="trailing"in t?t.trailing:p);var g=function(){var t=n-(Oi()-a);if(0>=t){i&&Lr(i);var f=l;i=c=l=h,f&&(s=Oi(),o=e.apply(u,r),c||i||(r=u=null))}else c=Hr(g,t)},m=function(){c&&Lr(c),i=c=l=h,(p||f!==n)&&(s=Oi(),o=e.apply(u,r),c||i||(r=u=null))};return function(){if(r=arguments,a=Oi(),u=this,l=p&&(c||!d),f===!1)var t=d&&!c;else{i||d||(s=a);var h=f-(a-s),v=0>=h;v?(i&&(i=Lr(i)),s=a,o=e.apply(u,r)):i||(i=Hr(m,h))}return v&&c?c=Lr(c):c||n===f||(c=Hr(g,n)),t&&(v=!0,o=e.apply(u,r)),!v||c||i||(r=u=null),o}}function Qt(e){if(!Rn(e))throw new Dr;var n=p(arguments,1);return Hr(function(){e.apply(h,n)},1)}function Vt(e,n){if(!Rn(e))throw new Dr;var t=p(arguments,2);return Hr(function(){e.apply(h,t)},n)}function Kt(e,n){if(!Rn(e))throw new Dr;var t=function(){var r=t.cache,i=n?n.apply(this,arguments):y+arguments[0];return Ur.call(r,i)?r[i]:r[i]=e.apply(this,arguments)};return t.cache={},t}function Yt(e){var n,t;if(!Rn(e))throw new Dr;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}function Jt(e){return pn(e,16,p(arguments,1))}function Xt(e){return pn(e,32,null,p(arguments,1))}function Zt(e,n,t){var r=!0,i=!0;if(!Rn(e))throw new Dr;return t===!1?r=!1:Nn(t)&&(r="leading"in t?t.leading:r,i="trailing"in t?t.trailing:i),V.leading=r,V.maxWait=n,V.trailing=i,Ht(e,n,V)}function er(e,n){return pn(n,16,[e])}function nr(e){return function(){return e}}function tr(e,n,t){var r=typeof e;if(null==e||"function"==r)return nn(e,n,t);if("object"!=r)return cr(e);var i=pi(e),o=i[0],a=e[o];return 1!=i.length||a!==a||Nn(a)?function(n){for(var t=i.length,r=!1;t--&&(r=un(n[i[t]],e[i[t]],null,!0)););return r}:function(e){var n=e[o];return a===n&&(0!==a||1/a==1/n)}}function rr(e){return null==e?"":Pr(e).replace(yi,hn)}function ir(e){return e}function or(e,n,t){var r=!0,i=n&&jn(n);n&&(t||i.length)||(null==t&&(t=n),o=m,n=e,e=g,i=jn(n)),t===!1?r=!1:Nn(t)&&"chain"in t&&(r=t.chain);var o=e,a=Rn(o);rt(i,function(t){var i=e[t]=n[t];a&&(o.prototype[t]=function(){var n=this.__chain__,t=this.__wrapped__,a=[t];Gr.apply(a,arguments);var u=i.apply(e,a);if(r||n){if(t===u&&Nn(u))return this;u=new o(u),u.__chain__=n}return u})})}function ar(){return t._=Tr,this}function ur(){}function cr(e){return function(n){return n[e]}}function lr(e,n,t){var r=null==e,i=null==n;if(null==t&&("boolean"==typeof e&&i?(t=e,e=1):i||"boolean"!=typeof n||(t=n,i=!0)),r&&i&&(n=1),e=+e||0,i?(n=e,e=0):n=+n||0,t||e%1||n%1){var o=ii();return ti(e+o*(n-e+parseFloat("1e-"+((o+"").length-1))),n)}return ln(e,n)}function sr(e,n){if(e){var t=e[n];return Rn(t)?e[n]():t}}function fr(e,n,t){var r=g.templateSettings;e=Pr(e||""),t=ci?_i({},t,r):r;var i,o=ci&&_i({},t.imports,r.imports),u=ci?pi(o):["_"],c=ci?Yn(o):[g],l=0,s=t.interpolate||O,f="__p += '",p=qr((t.escape||O).source+"|"+s.source+"|"+(s===P?S:O).source+"|"+(t.evaluate||O).source+"|$","g");e.replace(p,function(n,t,r,o,u,c){return r||(r=o),f+=e.slice(l,c).replace(A,a),t&&(f+="' +\n__e("+t+") +\n'"),u&&(i=!0,f+="';\n"+u+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+n.length,n}),f+="';\n";var d=t.variable,m=d;m||(d="obj",f="with ("+d+") {\n"+f+"\n}\n"),f=(i?f.replace(E,""):f).replace(C,"$1").replace(k,"$1;"),f="function("+d+") {\n"+(m?"":d+" || ("+d+" = {});\n")+"var __t, __p = '', __e = _.escape"+(i?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v="\n/*\n//# sourceURL="+(t.sourceURL||"/lodash/template/source["+R++ +"]")+"\n*/";try{var b=Cr(u,"return "+f+v).apply(h,c)}catch(y){throw y.source=f,y}return n?b(n):(b.source=f,b)}function pr(e,n,t){e=(e=+e)>-1?e:0;var r=-1,i=xr(e);for(n=nn(n,t,1);++r<e;)i[r]=n(r);return i}function dr(e){return null==e?"":Pr(e).replace(bi,bn)}function hr(e){var n=++v;return Pr(null==e?"":e)+n}function gr(e){return e=new m(e),e.__chain__=!0,e}function mr(e,n){return n(e),e}function vr(){return this.__chain__=!0,this}function br(){return Pr(this.__wrapped__)}function yr(){return this.__wrapped__}t=t?on.defaults(Z.Object(),t,on.pick(Z,M)):Z;var xr=t.Array,wr=t.Boolean,_r=t.Date,Er=t.Error,Cr=t.Function,kr=t.Math,Sr=t.Number,jr=t.Object,qr=t.RegExp,Pr=t.String,Dr=t.TypeError,Or=[],Br=Er.prototype,Ar=jr.prototype,Mr=Pr.prototype,Tr=t._,Rr=Ar.toString,Nr=qr("^"+Pr(Rr).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Ir=kr.ceil,Lr=t.clearTimeout,Fr=kr.floor,zr=Cr.prototype.toString,Wr=mn(Wr=jr.getPrototypeOf)&&Wr,Ur=Ar.hasOwnProperty,Gr=Or.push,$r=Ar.propertyIsEnumerable,Hr=t.setTimeout,Qr=Or.splice,Vr=Or.unshift,Kr=function(){try{var e={},n=mn(n=jr.defineProperty)&&n,t=n(e,e,e)&&n}catch(r){}return t}(),Yr=mn(Yr=jr.create)&&Yr,Jr=mn(Jr=xr.isArray)&&Jr,Xr=t.isFinite,Zr=t.isNaN,ei=mn(ei=jr.keys)&&ei,ni=kr.max,ti=kr.min,ri=t.parseInt,ii=kr.random,oi={};oi[I]=xr,oi[L]=wr,oi[F]=_r,oi[W]=Cr,oi[G]=jr,oi[U]=Sr,oi[$]=qr,oi[H]=Pr;var ai={};ai[I]=ai[F]=ai[U]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},ai[L]=ai[H]={constructor:!0,toString:!0,valueOf:!0},ai[z]=ai[W]=ai[$]={constructor:!0,toString:!0},ai[G]={constructor:!0},function(){for(var e=T.length;e--;){var n=T[e];for(var t in ai)Ur.call(ai,t)&&!Ur.call(ai[t],n)&&(ai[t][n]=!1)}}(),m.prototype=g.prototype;var ui=g.support={};!function(){var e=function(){this.x=1},n={0:1,length:1},r=[];e.prototype={valueOf:1,y:1};for(var i in new e)r.push(i);for(i in arguments);ui.argsClass=Rr.call(arguments)==N,ui.argsObject=arguments.constructor==jr&&!(arguments instanceof xr),ui.enumErrorProps=$r.call(Br,"message")||$r.call(Br,"name"),ui.enumPrototypes=$r.call(e,"prototype"),ui.funcDecomp=!mn(t.WinRTError)&&B.test(d),ui.funcNames="string"==typeof Cr.name,ui.nonEnumArgs=0!=i,ui.nonEnumShadows=!/valueOf/.test(r),ui.ownLast="x"!=r[0],ui.spliceObjects=(Or.splice.call(n,0,1),!n[0]),ui.unindexedChars="x"[0]+jr("x")[0]!="xx";try{ui.nodeClass=!(Rr.call(document)==G&&!({toString:0}+""))}catch(o){ui.nodeClass=!0}}(1),g.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:P,variable:"",imports:{_:g}};var ci=fr("var index, iterable = <%= firstArg %>, result = <%= init %>;\nif (!iterable) return result;\n<%= top %>;<% if (array) { %>\nvar length = iterable.length; index = -1;\nif (<%= array %>) {  <% if (support.unindexedChars) { %>\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  <% } %>\n  while (++index < length) {\n    <%= loop %>;\n  }\n}\nelse {  <% } else if (support.nonEnumArgs) { %>\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      <%= loop %>;\n    }\n  } else {  <% } %>  <% if (support.enumPrototypes) { %>\n  var skipProto = typeof iterable == 'function';\n  <% } %>  <% if (support.enumErrorProps) { %>\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  <% } %>  <%    var conditions = [];    if (support.enumPrototypes) { conditions.push('!(skipProto && index == \"prototype\")'); }    if (support.enumErrorProps)  { conditions.push('!(skipErrorProps && (index == \"message\" || index == \"name\"))'); }  %>  <% if (useHas && keys) { %>\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n<%    if (conditions.length) { %>    if (<%= conditions.join(' && ') %>) {\n  <% } %>    <%= loop %>;    <% if (conditions.length) { %>\n    }<% } %>\n  }  <% } else { %>\n  for (index in iterable) {\n<%    if (useHas) { conditions.push(\"hasOwnProperty.call(iterable, index)\"); }    if (conditions.length) { %>    if (<%= conditions.join(' && ') %>) {\n  <% } %>    <%= loop %>;    <% if (conditions.length) { %>\n    }<% } %>\n  }    <% if (support.nonEnumShadows) { %>\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      <% for (k = 0; k < 7; k++) { %>\n    index = '<%= shadowedProps[k] %>';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))<%        if (!useHas) { %> || (!nonEnum[index] && iterable[index] !== objectProto[index])<% }      %>) {\n      <%= loop %>;\n    }      <% } %>\n  }    <% } %>  <% } %>  <% if (array || support.nonEnumArgs) { %>\n}<% } %>\n<%= bottom %>;\nreturn result");Yr||(en=function(){function e(){}return function(n){if(Nn(n)){e.prototype=n;var r=new e;e.prototype=null}return r||t.Object()}}());var li=Kr?function(e,n){K.value=n,Kr(e,"__bindData__",K)}:ur;ui.argsClass||(yn=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ur.call(e,"callee")&&!$r.call(e,"callee")||!1});var si=Jr||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Rr.call(e)==I||!1},fi=dn({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),pi=ei?function(e){return Nn(e)?ui.enumPrototypes&&"function"==typeof e||ui.nonEnumArgs&&e.length&&yn(e)?fi(e):ei(e):[]}:fi,di={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:pi,loop:"if (callback(iterable[index], index, collection) === false) return result"},hi={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:pi,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},gi={top:"if (!objectTypes[typeof iterable]) return result;\n"+di.top,array:!1},mi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},vi=Pn(mi),bi=qr("("+pi(vi).join("|")+")","g"),yi=qr("["+pi(mi).join("")+"]","g"),xi=dn(di),wi=dn(hi,{top:hi.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),_i=dn(hi),Ei=dn(di,gi,{useHas:!1}),Ci=dn(di,gi);Rn(/x/)&&(Rn=function(e){return"function"==typeof e&&Rr.call(e)==W});var ki=Wr?function(e){if(!e||Rr.call(e)!=G||!ui.argsClass&&yn(e))return!1;var n=e.valueOf,t=mn(n)&&(t=Wr(n))&&Wr(t);return t?e==t||Wr(e)==t:vn(e)}:vn,Si=fn(function(e,n,t){Ur.call(e,t)?e[t]++:e[t]=1}),ji=fn(function(e,n,t){(Ur.call(e,t)?e[t]:e[t]=[]).push(n)}),qi=fn(function(e,n,t){e[t]=n}),Pi=at,Di=et,Oi=mn(Oi=_r.now)&&Oi||function(){return(new _r).getTime()},Bi=8==ri(_+"08")?ri:function(e,n){return ri(Wn(e)?e.replace(D,""):e,n||0)};return g.after=Ft,g.assign=wi,g.at=Jn,g.bind=zt,g.bindAll=Wt,g.bindKey=Ut,g.chain=gr,g.compact=bt,g.compose=Gt,g.constant=nr,g.countBy=Si,g.create=_n,g.createCallback=tr,g.curry=$t,g.debounce=Ht,g.defaults=_i,g.defer=Qt,g.delay=Vt,g.difference=yt,g.filter=et,g.flatten=Et,g.forEach=rt,g.forEachRight=it,g.forIn=Ei,g.forInRight=kn,g.forOwn=Ci,g.forOwnRight=Sn,g.functions=jn,g.groupBy=ji,g.indexBy=qi,g.initial=kt,g.intersection=St,g.invert=Pn,g.invoke=ot,g.keys=pi,g.map=at,g.mapValues=Gn,g.max=ut,g.memoize=Kt,g.merge=$n,g.min=ct,g.omit=Hn,g.once=Yt,g.pairs=Qn,g.partial=Jt,g.partialRight=Xt,g.pick=Vn,g.pluck=Pi,g.property=cr,g.pull=Pt,g.range=Dt,g.reject=ft,g.remove=Ot,g.rest=Bt,g.shuffle=dt,g.sortBy=mt,g.tap=mr,g.throttle=Zt,g.times=pr,g.toArray=vt,g.transform=Kn,g.union=Mt,g.uniq=Tt,g.values=Yn,g.where=Di,g.without=Rt,g.wrap=er,g.xor=Nt,g.zip=It,g.zipObject=Lt,g.collect=at,g.drop=Bt,g.each=rt,g.eachRight=it,g.extend=wi,g.methods=jn,g.object=Lt,g.select=et,g.tail=Bt,g.unique=Tt,g.unzip=It,or(g),g.clone=xn,g.cloneDeep=wn,g.contains=Xn,g.escape=rr,g.every=Zn,g.find=nt,g.findIndex=xt,g.findKey=En,g.findLast=tt,g.findLastIndex=wt,g.findLastKey=Cn,g.has=qn,g.identity=ir,g.indexOf=Ct,g.isArguments=yn,g.isArray=si,g.isBoolean=Dn,g.isDate=On,g.isElement=Bn,g.isEmpty=An,g.isEqual=Mn,g.isFinite=Tn,g.isFunction=Rn,g.isNaN=In,g.isNull=Ln,g.isNumber=Fn,g.isObject=Nn,g.isPlainObject=ki,g.isRegExp=zn,g.isString=Wn,g.isUndefined=Un,g.lastIndexOf=qt,g.mixin=or,g.noConflict=ar,g.noop=ur,g.now=Oi,g.parseInt=Bi,g.random=lr,g.reduce=lt,g.reduceRight=st,g.result=sr,g.runInContext=d,g.size=ht,g.some=gt,g.sortedIndex=At,g.template=fr,g.unescape=dr,g.uniqueId=hr,g.all=Zn,g.any=gt,g.detect=nt,g.findWhere=nt,g.foldl=lt,g.foldr=st,g.include=Xn,g.inject=lt,or(function(){var e={};return Ci(g,function(n,t){g.prototype[t]||(e[t]=n)}),e}(),!1),g.first=_t,g.last=jt,g.sample=pt,g.take=_t,g.head=_t,Ci(g,function(e,n){var t="sample"!==n;g.prototype[n]||(g.prototype[n]=function(n,r){var i=this.__chain__,o=e(this.__wrapped__,n,r);return i||null!=n&&(!r||t&&"function"==typeof n)?new m(o,i):o})}),g.VERSION="2.4.1",g.prototype.chain=vr,g.prototype.toString=br,g.prototype.value=yr,g.prototype.valueOf=yr,xi(["join","pop","shift"],function(e){var n=Or[e];g.prototype[e]=function(){var e=this.__chain__,t=n.apply(this.__wrapped__,arguments);return e?new m(t,e):t}}),xi(["push","reverse","sort","unshift"],function(e){var n=Or[e];g.prototype[e]=function(){return n.apply(this.__wrapped__,arguments),this}}),xi(["concat","slice","splice"],function(e){var n=Or[e];g.prototype[e]=function(){return new m(n.apply(this.__wrapped__,arguments),this.__chain__)}}),ui.spliceObjects||xi(["pop","shift","splice"],function(e){var n=Or[e],t="splice"==e;g.prototype[e]=function(){var e=this.__chain__,r=this.__wrapped__,i=n.apply(r,arguments);return 0===r.length&&delete r[0],e||t?new m(i,e):i}}),g._baseEach=xi,g._iteratorTemplate=ci,g._shimKeys=fi,g}var h,g=[],m=[],v=0,b={},y=+new Date+"",x=75,w=40,_=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",E=/\b__p \+= '';/g,C=/\b(__p \+=) '' \+/g,k=/(__e\(.*?\)|\b__t\)) \+\n'';/g,S=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,j=/\w*$/,q=/^\s*function[ \n\r\t]+\w/,P=/<%=([\s\S]+?)%>/g,D=RegExp("^["+_+"]*0+(?=.$)"),O=/($^)/,B=/\bthis\b/,A=/['\n\r\t\u2028\u2029\\]/g,M=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],T=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],R=0,N="[object Arguments]",I="[object Array]",L="[object Boolean]",F="[object Date]",z="[object Error]",W="[object Function]",U="[object Number]",G="[object Object]",$="[object RegExp]",H="[object String]",Q={};Q[W]=!1,Q[N]=Q[I]=Q[L]=Q[F]=Q[U]=Q[G]=Q[$]=Q[H]=!0;var V={leading:!1,maxWait:0,trailing:!1},K={configurable:!1,enumerable:!1,value:null,writable:!1},Y={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},J={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},X={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Z=J[typeof window]&&window||this,en=J[typeof exports]&&exports&&!exports.nodeType&&exports,nn=J[typeof module]&&module&&!module.nodeType&&module,tn=nn&&nn.exports===en&&en,rn=J[typeof global]&&global;!rn||rn.global!==rn&&rn.window!==rn||(Z=rn);var on=d();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=on,define("lodash",[],function(){return on})):en&&nn?tn?(nn.exports=on)._=on:en._=on:Z._=on}.call(this),define("config",[],function(){var e=Box2D.Common.Math.b2Vec2,n=document.getElementsByTagName("canvas")[0],t=n.getContext("2d");t.font='12pt "Clear Sans", "Helvetica Neue", Arial, sans-serif';var r={4096:{color:"#000",fontColor:"#fff",fontSize:"",fontPos:[]},2048:{color:"#edc22e",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},1024:{color:"#edc53f",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},512:{color:"#edc850",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},256:{color:"#edcc61",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},128:{color:"#edcf72",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},64:{color:"#f65e3b",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},32:{color:"#f67c5f",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},16:{color:"#f59563",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},8:{color:"#f2b179",fontColor:"#f9f6f2",fontSize:"",fontPos:[]},4:{color:"#ede0c8",fontColor:"#776e65",fontSize:"",fontPos:[]},2:{color:"#eee4da",fontColor:"#776e65",fontSize:"",fontPos:[]}};return{alallowSleep:!0,canvas:n,context:t,gravity:new e(0,5),scale:30,boxSettings:r,splitImpulse:30}}),define("events",[],function(){var e={};return{on:function(n,t,r){var i={fn:t,context:r};return e[n]?void e[n].push(i):void(e[n]=[i])},off:function(n){delete e[n]},trigger:function(n){var t=Array.prototype.slice.call(arguments);t.shift();var r=e[n];r&&r.forEach(function(e){e.fn.apply(e.context,t)})}}}),define("contact-listener",["lodash"],function(e){var n=e.curry(function(e,n){return e===n[0]||e===n[1]}),t=function(e){return r.contacts.filter(n(e)).length>0},r={contacts:[],reset:function(){r.contacts=[]},BeginContact:function(e){var n=e.m_fixtureA.GetBody().GetUserData(),i=e.m_fixtureB.GetBody().GetUserData();n.value&&i.value&&n.value===i.value&&(t(n)||t(i)||r.contacts.push([n,i]))},EndContact:function(){},PreSolve:function(){},PostSolve:function(){}};return r}),define("box2d.setup",["config","contact-listener"],function(e,n){var t=(Box2D.Common.Math.b2Vec2,Box2D.Dynamics.b2BodyDef,Box2D.Dynamics.b2Body,Box2D.Dynamics.b2FixtureDef,Box2D.Dynamics.b2Fixture,Box2D.Collision.Shapes.b2MassData,Box2D.Collision.Shapes.b2PolygonShape,Box2D.Collision.Shapes.b2CircleShape,Box2D.Dynamics.b2DebugDraw,Box2D.Dynamics.b2World),r=new t(e.gravity,e.allowSleep);r.SetContactListener(n);var i=1/60,o=function(){r.Step(i,10,10),r.ClearForces()};return{world:r,step:o}}),define("box2d.utils",["config","box2d.setup"],function(e,n){var t=Box2D.Collision.b2AABB,r=e.scale,i=n.world,o=function(e){return e/r},a=function(e){return e*r},u=function(e,n){var r=new t;r.lowerBound.Set(n.x-.2,n.y-.2),r.upperBound.Set(n.x+.2,n.y+.2),i.QueryAABB(function(n){var t=n.GetBody();return t.SetAwake(!0),e&&e(t),!1},r)};return{p2u:o,u2p:a,getBodyAt:u}}),define("is-mobile",[],function(){var e=!!navigator.userAgent.match(/(Android|BlackBerry|iphone|ipad|ipsod|Opera\sMini|IEMobile)/i);return e}),define("controls",["lodash","events","config","box2d.utils","is-mobile"],function(e,n,t,r,i){var o=t.canvas,a=(r.u2p,r.p2u),u=r.getBodyAt,c=i?"touchstart":"mousedown",l=i?"touchstart":"mouseup",s=function(e){n.trigger("tap:body",e)},f=function(e){var n,t,r;return i?(r=e.touches[0],n=r.clientX,t=r.clientY):(n=e.x,t=e.y),{x:a(n),y:a(t)}},p=function(e){return e.preventDefault(),e.stopPropagation(),e},d=e.compose(e.curry(u)(s),f),h=function(){i||o.addEventListener(c,p),o.addEventListener(l,d)},g=function(){i||o.removeEventListener(c,p),o.removeEventListener(l,d)};return{activate:h,deactivate:g}}),define("box",[],function(){var e=Box2D.Dynamics.b2Body,n=Box2D.Dynamics.b2BodyDef,t=Box2D.Dynamics.b2FixtureDef,r=Box2D.Collision.Shapes.b2PolygonShape,i=0,o=function(o,a,u,c){this.id=++i,this.width=u,this.height=c,this.init=function(i){this.fixDef=new t,this.fixDef.density=1,this.fixDef.friction=.5,this.fixDef.restitution=.2,this.fixDef.shape=new r,this.fixDef.shape.SetAsBox(u,c),this.bodyDef=new n,this.bodyDef.type=i?e.b2_staticBody:e.b2_dynamicBody,this.bodyDef.position.Set(o,a),this.bodyDef.userData=this}};return o}),define("box-factory",["config","box2d.setup","box2d.utils","box"],function(e,n,t,r){var i=e.splitImpulse,o=Box2D.Common.Math.b2Vec2,a=t.p2u,u=(t.u2p,n.world),c={},l=function(e,n,t,i,o){e||(e=n=t=i=1);var a=new r(e,n,t,i);return a.init(o),a.body=u.CreateBody(a.bodyDef),a.body.CreateFixture(a.fixDef),c[a.id]=a,a},s=function(e){c[e.id]=void 0,delete c[e.id],u.DestroyBody(e.body)},f=function(e){var n=e.body.GetWorldCenter();if(2!==e.value){s(e);var t,r,a,u,c,f,p,d,h,g;e.width>e.height?(t=n.x-e.width/2-.05,a=n.x+e.width/2+.05,r=u=n.y,c=e.width/2,f=e.height,p=new o(-c*f*i,0),d=new o(c*f*i,0)):(t=a=n.x,r=n.y-e.height/2-.05,u=n.y+e.height/2+.05,c=e.width,f=e.height/2,p=new o(0,-c*f*i),d=new o(0,c*f*i)),h=l(t,r,c,f),g=l(a,u,c,f),h.value=e.value/2,g.value=e.value/2,h.body.ApplyImpulse(p,new o(t,r)),g.body.ApplyImpulse(d,new o(a,u))}},p=function(e,n){var t,r,i,o=e.width,a=e.height,u=e.body.GetWorldCenter(),c=n.body.GetWorldCenter(),f=2*e.value;o>a?(i=u.y<c.y?u:c,a*=2,t=i.x,r=i.y-e.height/4):(i=u.x<c.x?u:c,o*=2,t=i.x-e.width/4,r=i.y),s(e),s(n),l(t,r,o,a).value=f};return createWalls=function(){var e=a(window.innerWidth),n=a(window.innerHeight);l(e/2,-2,e,2,!0),l(e+2,n/2,2,n,!0),l(e/2,n+2,e,2,!0),l(-2,n/2,2,n,!0)},{boxes:c,create:l,createWalls:createWalls,remove:s,splitBox:f,joinBoxes:p}}),define("modal",[],function(){var e=document.getElementsByClassName("modal")[0],n=document.getElementsByClassName("modal-content")[0],t=document.getElementsByClassName("modal-score")[0],r=document.getElementsByClassName("twitter-share-button")[0];e.style.cssText=["position: fixed","top: 0","left: 0","right: 0","bottom: 0"].join(";"),n.style.cssText=["width: 300px","background-color: rgba(0, 0, 0, 0.5)","margin: 50px auto","padding: 20px"].join(";");var i={content:n,show:function(n){n||(n=0),t.innerText=n,r.dataset.text="I completed From 2048 with score "+n+"!",!function(e,n,t){var r,i=e.getElementsByTagName(n)[0],o=/^http:/.test(e.location)?"http":"https";e.getElementById(t)||(r=e.createElement(n),r.id=t,r.src=o+"://platform.twitter.com/widgets.js",i.parentNode.insertBefore(r,i))}(document,"script","twitter-wjs"),e.style.display="block"},hide:function(){e.style.display="none"}};return i.hide(),document.body.appendChild(e),i}),define("score",["lodash"],function(e){var n=document.createElement("div");document.body.appendChild(n),n.style.cssText=["position: fixed","top: 0","right: 10px","font-family: arial","color: #333","font-size: 16px"].join(";");var t=document.createElement("p");n.appendChild(t);var r={total:document.createElement("span"),max:document.createElement("span")};e.forEach(r,function(e){t.appendChild(e)});var i={total:0,max:0,allTime:0,more:function(e){i.total+=e,i.total>i.max&&(i.max=i.total)},less:function(e){i.total-=e},reset:function(){i.total=0,i.max=0},draw:function(){r.total.innerText="Score: "+i.total,r.max.innerText="Best: "+i.max}};return i}),define("request-animation-frame",[],function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}),define("particles",["lodash","config","request-animation-frame"],function(e,n){var t=n.context,r=.9,i=0,o=1,a=2,u=3,c=4,l=5,s=6,f=7,p=8,d=9,h=function(){return Math.random()<.5?-1:1},g=function(e){return Date.now()-e[p]<e[f]},m=function(e){e[c]*=r,e[a]*=r,e[i]+=e[a]+e[c],e[l]*=r,e[u]*=r,e[o]+=e[u]+e[l]},v=function(e){t.beginPath();var n=t.createRadialGradient(e[i],e[o],0,e[i],e[o],e[d]);n.addColorStop(0,"rgba(255, 255, 255, 0.5)"),n.addColorStop(.4,"rgba(255, 255, 255, 0.5)"),n.addColorStop(.4,e[s]),n.addColorStop(.9,"rgba(255, 255, 255, 0.5)"),n.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=n,t.arc(e[i],e[o],e[d],2*Math.PI,!1),t.fill()},b={mine:[],create:function(e,n,t){t||(t="rgba(237, 194, 46, 0.5)");var r=[e,n,h()*Math.random(),h()*Math.random(),h()*Math.random(),h()*Math.random(),t,500,Date.now(),10*Math.random()+15];b.mine.push(r)},remove:function(){var e=b.mine.filter(g);delete b.mine,b.mine=e},update:function(){b.mine.forEach(m)},draw:function(){b.mine.forEach(v)}},y=function(e,n,t){for(var r=0;t>r;r++)b.create(e,n)},x=function(){b.mine.length&&(b.remove(),b.update(),b.draw())};return{emit:y,loop:x}}),define("game",["lodash","config","box2d.setup","box2d.utils","events","controls","box-factory","contact-listener","modal","score","particles"],function(e,n,t,r,i,o,a,u,c,l,s){var f={},p=n.context,d=n.canvas,h=n.boxSettings,g=(t.world,t.step),m=r.p2u,v=r.u2p,b=function(e){var n=e.GetUserData();if(i.trigger("box:split",n),n.value){if(n.value<=2){var t=n.body.GetWorldCenter();return s.emit(v(t.x),v(t.y),3),a.remove(n)}a.splitBox(n)}},y=function(e){i.trigger("box:join",e),a.joinBoxes.apply(null,e)},x=function(e){if(e.value){var n=e.body.GetWorldCenter(),t=e.body.GetAngle(),r=v(e.width),i=v(e.height);p.save(),p.beginPath(),p.translate(v(n.x),v(n.y)),p.rotate(t),p.fillStyle=h[e.value].color,p.fillRect(-r,-i,2*r,2*i),p.fillStyle=h[e.value].fontColor,p.fillText(e.value<10?" "+e.value:e.value,-10,10),p.stroke(),p.restore()}},w=function(){e.forEach(a.boxes,x)},_=function(){return e.keys(a.boxes).length<=4};return f.init=function(){a.createWalls();var e=m(window.innerWidth),n=m(window.innerHeight),t=a.create(e/2,n/2,e/3,n/3);t.value=2048},f.step=function(){g(),u.contacts.forEach(y),u.reset(),p.clearRect(0,0,d.width,d.height),p.globalCompositeOperation="lighter",s.loop(),p.globalCompositeOperation="source-over",w(),_()&&(f.stop(),c.show(l.max))},f.start=function(){f.interval||(f.interval=setInterval(f.step,1e3/60))},f.controlsActivate=function(){i.on("tap:body",b),o.activate()},f.stop=function(){f.interval&&(clearInterval(f.interval),i.off("tap:body"),o.deactivate())},f}),require.config({paths:{lodash:"/lodash"}}),require(["config","events","game","score","is-mobile"],function(e,n,t,r){t.init(),t.step();var i="mouseup",o=function(n){n.preventDefault(),e.canvas.removeEventListener(i,o),t.start()};e.canvas.addEventListener(i,o),t.controlsActivate(),r.draw(),n.on("box:split",function(){r.more(2),r.draw()}),n.on("box:join",function(){r.less(2),r.draw()})}),define("main",function(){});